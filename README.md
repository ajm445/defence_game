# 막아라! 무너트려라!

> 자원을 채집하고, 기지를 세우고, 적을 무너트려라!

**RTS 모드**와 **RPG 모드**를 모두 즐길 수 있는 종합 전략 게임입니다.

**Version: 1.24.0**

---

## 게임 소개

### 🎮 게임 모드

| 모드 | 설명 | 플레이어 |
|------|------|----------|
| **RTS 모드** | 자원 채집, 유닛 생산, 기지 공략 | 싱글/멀티 |
| **RPG 모드** | 영웅 선택, 스킬 전투, 넥서스 디펜스 | 싱글/멀티(협동) |

---

## RTS 모드

10분 안에 적 기지를 파괴하세요! 자원을 채집하고, 유닛을 생산하고, 전략적으로 공격과 방어를 조율해야 합니다.

### 승리 조건
- 적 기지 HP를 0으로 만들면 **승리**
- 시간 종료 시 HP가 더 높으면 **승리**
- **극악 난이도**: 보스를 처치하면 **승리**

### 패배 조건
- 내 기지 HP가 0이 되면 **패배**
- 시간 종료 시 적 HP가 더 높거나 같으면 **패배**
- **극악 난이도**: 보스가 내 기지를 파괴하면 **패배**

---

## 기술 스택

### 클라이언트

| 기술 | 버전 | 용도 |
|------|------|------|
| React | 19.x | UI 프레임워크 |
| TypeScript | 5.x | 타입 안정성 |
| Vite | 7.x | 빌드 도구 |
| Zustand | 5.x | 상태 관리 |
| Tailwind CSS | 4.x | 스타일링 |

### 서버 (멀티플레이어 + API)

| 기술 | 버전 | 용도 |
|------|------|------|
| Node.js | 22.x | 런타임 |
| Express | 4.x | REST API 서버 |
| ws | 8.x | WebSocket 서버 |
| helmet | 8.x | HTTP 보안 헤더 |
| Supabase | 2.x | 인증 및 데이터베이스 (Admin API) |
| TypeScript | 5.x | 타입 안정성 |

---

## 설치 및 실행

### 튜토리얼 / AI 대전 (싱글플레이어)

```bash
# 의존성 설치
npm install

# 개발 서버 실행
npm run dev

# 프로덕션 빌드
npm run build
```

> 처음 플레이한다면 **튜토리얼 모드**로 시작하세요! 자원 유닛부터 전투 유닛까지 단계별로 배울 수 있습니다.

### 1vs1 대전 (멀티플레이어)

```bash
# 전체 의존성 설치 (루트 + 서버)
npm install

# 서버 실행 (별도 터미널)
cd server
npm run dev

# 클라이언트 실행 (별도 터미널)
npm run dev
```

**플레이 방법:**
1. 한 플레이어가 "방 만들기" 클릭 → 초대 코드 생성
2. 초대 코드를 상대방에게 공유
3. 상대방이 초대 코드 입력 후 "입장" 클릭
4. 양쪽 플레이어 입장 후 게임 자동 시작

---

## 게임 플레이

### 자원

| 자원 | 아이콘 | 획득 방법 |
|------|--------|----------|
| 골드 | 금색 | 자동 획득 (기본 4/초, 업그레이드로 증가) / 금광부 (광산) |
| 나무 | 갈색 | 나무꾼 / 직접 채집 |
| 돌 | 회색 | 광부 / 직접 채집 |
| 약초 | 초록 | 채집꾼 / 직접 채집 |
| 수정 | 보라 | 채집꾼 (희귀) / 수정 노드 |

### 유닛

#### 전투 유닛

| 유닛 | 비용 | HP | 공격력 | 사거리 | 설명 |
|------|------|----|----|--------|------|
| 검병 | 50 골드 | 100 | 15 | 30 | 근접 전투 유닛 |
| 궁수 | 80 골드 + 10 나무 | 50 | 25 | 150 | 원거리 공격 유닛 |
| 기사 | 120 골드 + 20 나무 + 30 돌 | 300 | 10 | 35 | 근접 탱커 (높은 체력) |
| 마법사 | 150 골드 + 50 나무 + 10 수정 | 40 | 50 | 200 | 범위 공격 (AOE 50px) |

#### 지원 유닛

| 유닛 | 비용 | HP | 특수 능력 | 설명 |
|------|------|----|----------|------|
| 나무꾼 | 30 골드 | 60 | 채집 1.0/초 | 나무 채집 |
| 광부 | 40 골드 + 5 나무 | 70 | 채집 1.5/초 | 돌 채집 |
| 채집꾼 | 50 골드 | 50 | 채집 1.5/초 | 약초 채집 (수정 확률) |
| 금광부 | 100 골드 + 20 나무 | 70 | 채집 1.5/초 | 골드 채집 (광산) |
| 힐러 | 70 골드 + 15 약초 | 60 | 광역 회복 5HP/초 | 전투 유닛만 치료 (범위 130px) |

#### 보스 유닛 (극악 난이도 전용)

| 유닛 | 출현 조건 | HP | 공격력 | AOE | 설명 |
|------|----------|----|----|-----|------|
| 보스 | 적 본진 파괴 시 | 2000 | 100 | 80px | 느린 이동, 강력한 광역 공격 |

> 보스는 플레이어가 소환할 수 없으며, 극악 난이도 페이즈 2에서 자동 출현합니다.

### 건설

| 행동 | 비용 | 효과 |
|------|------|------|
| 벽 건설 | 40 나무 + 20 돌 | 방어벽 생성 (HP 150) |
| 기지 업그레이드 | 레벨별 증가 | 기지 HP +200, 골드 수입 +1/초 |

#### 기지 업그레이드 비용 (최대 5레벨)

| 레벨 | 골드 | 나무 | 돌 | 누적 골드 수입 |
|------|------|------|-----|---------------|
| 1 | 150 | - | - | 5/초 |
| 2 | 100 | 50 | 50 | 6/초 |
| 3 | 150 | 75 | 75 | 7/초 |
| 4 | 225 | 112 | 112 | 8/초 |
| 5 (MAX) | 337 | 168 | 168 | 9/초 |

---

### RTS 조작법

#### 키보드

| 키 | 동작 |
|----|------|
| `방향키` | 카메라 이동 |
| `Space` | 본진으로 카메라 이동 |
| `Q` | 벽 배치 모드 토글 |
| `W` | 본진 강화 |
| `E` | 약초 판매 |
| `Y` | 가장자리 스크롤 토글 |
| `M` | 사운드 켜기/끄기 |
| `ESC` | 일시정지 / 게임 재개 |

#### 마우스

| 동작 | 기능 |
|------|------|
| 좌클릭 (유닛) | 유닛 선택 |
| 우클릭 드래그 | 카메라 이동 |
| 미니맵 클릭 | 해당 위치로 이동 |
| 마우스 휠 | 줌 인/아웃 (0.5x ~ 2x) |
| 화면 가장자리 | 카메라 자동 이동 (토글 필요) |

> 📷 가장자리 스크롤: 기본 비활성화. `Y` 키 또는 미니맵 좌측 📷 버튼으로 토글.
> 🔊 사운드: `M` 키 또는 미니맵 좌측 스피커 아이콘으로 음소거 토글. 아이콘에 마우스를 올리면 볼륨 조절 가능.

---

## RPG 모드

4가지 직업 중 하나를 선택하여 영웅을 조종하고, 중앙의 넥서스를 수호하는 **넥서스 디펜스** 모드입니다.

### 튜토리얼

> 🎓 처음 플레이한다면 **튜토리얼 모드**로 시작하세요!

RPG 로비에서 "튜토리얼" 버튼을 클릭하면 8단계 튜토리얼이 시작됩니다.

| 단계 | 제목 | 배우는 내용 |
|------|------|-------------|
| 1 | 환영 | 게임 목표 및 규칙 설명 |
| 2 | 이동 | WASD 조작법 (3개 지점 순회) |
| 3 | 자동 공격 | 사거리 내 자동 공격, C키로 사거리 확인 |
| 4 | 일반 스킬 | Shift 키로 스킬 사용 (마우스 방향) |
| 5 | 궁극기 | R 키로 궁극기 사용 |
| 6 | 업그레이드 | 골드 획득 및 스탯 강화 |
| 7 | 기지 파괴 | 적 기지 공격으로 보스 소환 |
| 8 | 보스 처치 | 보스 격파로 튜토리얼 완료 |

**튜토리얼 특징:**
- 작은 맵, 적 기지 1개
- 약한 적, 느린 스폰
- ESC로 일시정지 (계속/다시/설정/나가기)
- 완료 시 레벨/캐릭터 해금 시스템 안내

### 직업 도감

> 📚 RPG 로비에서 **직업 도감** 버튼을 클릭하면 모든 직업 정보를 확인할 수 있습니다.

- **기본 직업 탭**: 4개 기본 직업(전사, 궁수, 기사, 마법사) 정보
- **전직 직업 탭**: 8개 전직 직업 정보
- **스킬 정보**: Shift(일반 스킬), R(궁극기) 설명 및 쿨타임
- **패시브 정보**: 직업별 패시브 효과
- **전직 경로**: 기본 → 1차 전직(Lv.15) → 2차 강화(Lv.40) 시각화
- **해금 상태**: 플레이어 레벨에 따른 잠금/해금 표시

### 극한 난이도 랭킹

> 🏆 RPG 로비에서 **랭킹** 버튼을 클릭하면 극한 난이도 클리어 기록을 확인할 수 있습니다.

- **플레이어별 랭킹**: 1인/2인/3인/4인 별도 랭킹 탭
- **표시 정보**: 순위, 클리어 시간, 참여 플레이어 정보
- **플레이어 정보**: 닉네임, 직업(전직 포함), 캐릭터 레벨
- **상위 20개**: 각 인원수별 빠른 클리어 순으로 정렬
- **메달 표시**: 1위 🥇, 2위 🥈, 3위 🥉

> ⚠️ 게스트 사용자는 랭킹에 등록되지 않습니다. 회원가입 후 플레이하세요!

### 게임 목표

| 조건 | 설명 |
|------|------|
| **승리** | 양쪽 적 기지 파괴 → 보스 처치 (난이도별 2~4마리) |
| **패배** | 넥서스 HP 0 또는 영웅 사망 (싱글) |

### 직업

| 직업 | HP | 공격력 | 사거리 | 특징 |
|------|-----|--------|--------|------|
| **전사** | 350 | 35 | 80 | 균형 잡힌 근접 딜러, 돌진/광전사 버프 |
| **궁수** | 250 | 45 | 150 | 고공격 원거리 딜러, 관통/화살비 |
| **기사** | 450 | 30 | 60 | 고체력 탱커, 방패 돌진/철벽 방어 |
| **마법사** | 220 | 55 | 120 | 광역 마법 딜러, 화염구/운석 낙하 |

### 스킬 시스템

| 키 | 스킬 | 설명 |
|----|------|------|
| **자동** | 기본 공격 (Q) | 사거리 내 적 자동 공격 |
| **Shift** | 일반 스킬 (W) | 직업별 고유 스킬 |
| **R** | 궁극기 (E) | 강력한 궁극기 |

### 기본 직업 스킬

| 직업 | W 스킬 (Shift) | W 쿨타임 | E 스킬 (R) | E 쿨타임 |
|------|---------------|---------|-----------|---------|
| 전사 | 돌진 | 4초 | 광전사 | 30초 |
| 궁수 | 관통 화살 | 4초 | 화살 비 | 25초 |
| 기사 | 방패 돌진 | 8초 | 철벽 방어 | 60초 |
| 마법사 | 화염구 | 5초 | 운석 낙하 | 40초 |

> **기사 특수 효과**: 기본공격 적중 시 W스킬 쿨타임 1초 감소

### 전직 시스템

레벨 15 도달 시 전직 가능, 레벨 40 도달 시 2차 강화 (스탯 ×1.2)

| 기본 직업 | 전직 1 | 전직 2 |
|---------|--------|--------|
| 전사 | 버서커 | 가디언 |
| 궁수 | 저격수 | 레인저 |
| 기사 | 팔라딘 | 다크나이트 |
| 마법사 | 대마법사 | 힐러 |

### 전직 스킬 상세

#### 전사 계열

| 전직 | W 스킬 | W 쿨타임 | E 스킬 | E 쿨타임 | 특수 효과 |
|------|--------|---------|--------|---------|----------|
| **버서커** | 피의 돌진 | 6초 | 광란 | 45초 | 피해흡혈 1.3배 |
| **가디언** | 수호의 돌진 | 8초 | 수호의 벽 | 40초 | 받는 피해 30% 감소, 기본공격 적중 시 W쿨 1초↓ |

#### 궁수 계열

| 전직 | W 스킬 | W 쿨타임 | E 스킬 | E 쿨타임 | 특수 효과 |
|------|--------|---------|--------|---------|----------|
| **저격수** | 백플립 샷 | 5초 | 헤드샷 | 30초 | 기본공격 크리티컬 50% (데미지 2배) |
| **레인저** | 다중 화살 | 5초 | 화살 폭풍 | 35초 | - |

#### 기사 계열

| 전직 | W 스킬 | W 쿨타임 | E 스킬 | E 쿨타임 | 특수 효과 |
|------|--------|---------|--------|---------|----------|
| **팔라딘** | 신성한 돌진 | 8초 | 심판의 빛 | 60초 | 기본공격 시 주변 아군 힐 (본인 제외), 기본공격 적중 시 W쿨 1초↓ |
| **다크나이트** | 암흑 찌르기 | 4초 | 어둠의 칼날 (토글) | 2초 딜레이 | 기본공격 20% 피해흡혈, HP 소모형 |

#### 마법사 계열

| 전직 | W 스킬 | W 쿨타임 | E 스킬 | E 쿨타임 | 특수 효과 |
|------|--------|---------|--------|---------|----------|
| **대마법사** | 인페르노 | 7초 | 메테오 샤워 | 50초 | 보스 데미지 1.5배 |
| **힐러** | 치유의 빛 | 7초 | 생명의 샘 | 45초 | 주변 아군 초당 힐 오라 |

### 패시브 능력 (레벨 5 이상)

| 직업 | 패시브 효과 |
|------|------------|
| 전사 | HP 재생 증가 |
| 궁수 | 다중 타겟 공격 (최대 3체) |
| 기사 | HP 재생 증가 |
| 마법사 | 데미지 보너스 증가 |

### 버프 시스템

| 버프 | 효과 | 아이콘 |
|------|------|--------|
| 광전사 (Berserker) | 공격력/공속 증가, 피해흡혈 | 😈 |
| 철벽 (Ironwall) | 받는 피해 감소 | 🛡️ |
| 무적 (Invincible) | 모든 피해 무효화 | ✨ |
| 신속 (Swiftness) | 이동속도 증가 | 💨 |
| 기절 (Stun) | 행동 불가 | 💫 |

> 일부 버프(광전사, 철벽)는 범위 내 아군에게 공유됩니다.

### RPG 조작법

| 키/입력 | 동작 |
|---------|------|
| **WASD** | 이동 |
| **Shift** | 스킬 사용 |
| **R** | 궁극기 사용 |
| **1/2/3/4/5/6** | 업그레이드 (공격력/속도/HP/공속/골드획득률/사거리) |
| **C (누르고 있기)** | 기본 공격 사거리 표시 |
| **Space** | 카메라를 영웅 위치로 |
| **ESC** | 일시정지 |
| **마우스 휠** | 줌 인/아웃 |

### 골드 & 업그레이드 시스템

- 적 처치 시 골드 획득
- 적 기지 파괴 시 난이도별 골드 획득 (쉬움 50G ~ 극한 300G)
- 골드로 영웅 스탯 업그레이드 (레벨 제한 없음, 사거리만 최대 10레벨)
- **1**: 공격력 +3, **2**: 속도 +0.08, **3**: HP +25
- **4**: 공격속도 -0.03초, **5**: 추가골드 +2, **6**: 사거리 +8 (궁수/마법사만)

### 보스 시스템

양쪽 적 기지를 모두 파괴하면 **보스 페이즈**가 시작됩니다. 파괴된 기지 위치에서 보스가 스폰됩니다.

#### Boss1 - 보스 (근접형)

| 항목 | 1인 | 2인 | 3인 | 4인 |
|------|-----|-----|-----|-----|
| HP | 3500 | 4000 | 5500 | 7500 |
| 공격력 | 100 | 110 | 130 | 160 |
| 사거리 | 80px | 이동속도 0.96 | 공격속도 2.4초 | 글로우 빨강 |

**스킬 6종**: 강타(스턴), 충격파(즉사), 소환(졸개), 밀어내기(넉백), 돌진(이동+데미지), 회복(자힐)

#### Boss2 - 암흑 마법사 (원거리형, 지옥/종말 난이도 전용)

| 항목 | 1인 | 2인 | 3인 | 4인 |
|------|-----|-----|-----|-----|
| HP | 2800 | 3200 | 4400 | 6000 |
| 공격력 | 120 | 130 | 155 | 190 |
| 사거리 | 250px | 이동속도 1.0 | 공격속도 2.5초 | 글로우 보라 |

**스킬 6종**:

| 스킬 | 쿨다운 | 데미지 | 범위 | HP 조건 | 설명 |
|------|--------|--------|------|---------|------|
| 암흑 구체 | 6초 | 250% | 120px | - | 대상 방향 원거리 AoE 폭발 |
| 그림자 소환 | 18초 | - | 100px | ≤70% | 마법사 졸개 3마리 소환 |
| 공허의 영역 | 15초 | 50%/초 | 180px | - | 5초 지속 데미지 장판 |
| 암흑 유성 | 20초 | 300% | 100px | ≤50% | 각 영웅 위치에 유성 낙하 |
| 영혼 흡수 | 12초 | 150% | 200px | ≤60% | AoE 드레인 + 적중당 자힐 5% |
| 순간이동 | 10초 | - | - | ≤80% | 가장 먼 영웅 근처로 텔레포트 |

> 지옥/종말 난이도에서는 각 기지 위치에 Boss1 + Boss2가 함께 스폰되어 **총 4마리**의 보스가 등장합니다.

### 적 AI 시스템

- **기본 행동**: 넥서스를 향해 이동 및 공격
- **어그로**: 영웅에게 공격받으면 5초간 해당 영웅 추적
- **시간 경과**: 스폰 간격 감소, 적 스탯 증가

### 협동 모드 (멀티플레이어)

2-4명이 함께 넥서스를 수호하는 협동 모드입니다.

**플레이 방법:**
1. 한 플레이어가 "협동 모드" → "방 만들기" 클릭 → 초대 코드 생성
2. 초대 코드를 다른 플레이어에게 공유
3. 다른 플레이어가 초대 코드 입력 후 "입장" 클릭
4. 각 플레이어가 직업 선택 후 "준비" 클릭
5. 모든 플레이어 준비 완료 후 호스트가 "게임 시작" 클릭

**친구 시스템:**
- 친구 추가: 온라인 플레이어에게 친구 요청
- 게임 초대: 친구에게 직접 게임 초대 (비밀방도 코드 없이 입장)
- 온라인 상태: 친구의 접속 상태 실시간 확인
- 서버 상태: 현재 접속자 수, 활성 게임 수, 대기방 수 표시

**협동 모드 특징:**
- 골드 공유: 모든 플레이어가 동일한 골드 풀 사용
- 난이도 스케일링: 플레이어 수에 따라 적 체력 증가
- 자동 부활: 사망 시 10~30초 후 자동 부활
- 넥서스 공동 수호: 넥서스 파괴 시 전원 패배
- 대기방 채팅: 로비에서 팀원들과 채팅 가능
- 대기방 자동 파기: 호스트 비활성 시 방 자동 정리

**VIP 시스템:**
- VIP 사용자는 경험치 획득량 2배 (RPG 모드 + RTS 모드 모두 적용)
- 게임 결과 화면에서 VIP 보너스 표시

> 📖 자세한 내용은 [RPG 모드 설명서](docs/rpg-mode.md), [친구 시스템](docs/FRIENDS.md) 참조

---

## 프로젝트 구조

```
defence_game/
├── src/                      # 클라이언트 (React)
│   ├── components/           # React 컴포넌트
│   │   ├── canvas/          # 게임 렌더링 (GameCanvas, Minimap)
│   │   ├── common/          # 공통 컴포넌트 (Button, HPBar)
│   │   ├── screens/         # 화면 (MainMenu, LobbyScreen 등)
│   │   └── ui/              # UI 패널 (ResourceBar, UnitPanel 등)
│   ├── constants/           # 게임 설정 (config.ts)
│   ├── effects/             # 파티클 이펙트 시스템
│   ├── game/                # 게임 로직
│   │   ├── ai/              # 적 AI
│   │   ├── resources/       # 자원 노드 관리
│   │   └── units/           # 유닛 타입 및 동작
│   ├── hooks/               # 커스텀 훅 (게임 루프, 입력 처리)
│   ├── renderer/            # 캔버스 렌더링
│   ├── services/            # WebSocket 클라이언트, 사운드 매니저
│   ├── stores/              # Zustand 상태 관리
│   ├── types/               # TypeScript 타입
│   └── utils/               # 유틸리티 함수
├── server/                   # 멀티플레이어 서버 (Node.js)
│   └── src/
│       ├── api/             # REST API 라우터 (인증 등)
│       ├── game/            # 서버 게임 로직 (RTS GameRoom, RPG ServerGameEngine)
│       ├── room/            # 방 관리 (RoomManager)
│       ├── middleware/       # 보안 미들웨어 (Rate Limiter, 입력 검증, 인증)
│       ├── services/        # Supabase Admin 클라이언트
│       ├── state/           # 서버 상태 관리
│       └── websocket/       # WebSocket + Express 서버
└── shared/                   # 공유 타입
    └── types/               # 네트워크 메시지 및 게임 타입
```

---

## 환경 변수 (서버)

서버 실행에 필요한 환경 변수 목록. `server/.env` 파일 또는 배포 플랫폼(Railway 등)에서 설정.

| 변수 | 필수 | 설명 |
|------|:----:|------|
| `PORT` | - | 서버 포트 (기본값: 8080) |
| `NODE_ENV` | 프로덕션 | `production` 설정 시 보안 강화 적용 |
| `CORS_ORIGIN` | 프로덕션 | 허용할 클라이언트 도메인 (쉼표 구분). 미설정 시 `localhost:5173,4173`만 허용 |
| `JWT_SECRET` | 프로덕션 | 관리자 패널 JWT 서명 키. **프로덕션 미설정 시 서버 시작 거부** |
| `SUPABASE_URL` | O | Supabase 프로젝트 URL |
| `SUPABASE_ANON_KEY` | O | Supabase 익명 키 |
| `SUPABASE_SERVICE_ROLE_KEY` | O | Supabase 서비스 롤 키 |

> `JWT_SECRET`은 Supabase JWT와 별개. `node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"` 로 생성 권장.

---

## 서버 보안

### Rate Limiting (플레이어별)
악의적 패킷 스팸 방지. 정상 플레이에는 영향 없으며, 초과 시 조용히 무시.

| 대상 | 최소 간격 |
|------|----------|
| 이동 (COOP_HERO_MOVE) | 15ms |
| 플레이어 입력 (PLAYER_INPUT) | 15ms |
| 스킬 사용 (COOP_USE_SKILL) | 100ms |
| 업그레이드 (COOP_UPGRADE_HERO_STAT) | 200ms |
| 방 생성 (CREATE_COOP_ROOM) | 3초 |
| 방 참가 (JOIN_COOP_ROOM) | 1초 |

### 입력 검증
- **좌표 범위**: RPG 0~3000×0~2000, RTS 0~4000×0~2400
- **방향 벡터**: `null` 또는 길이 ≤ 1.5 (정규화 오차 허용)
- **스킬 슬롯**: `Q`, `W`, `E`만 허용
- **업그레이드 타입**: `attack`, `speed`, `hp`, `attackSpeed`, `goldRate`, `range`만 허용
- 검증 실패 시 `[Security]` 로그 출력 후 무시

### 기타 보안 설정
- **Helmet**: HTTP 보안 헤더 자동 설정 (CSP 제외)
- **CORS 화이트리스트**: `CORS_ORIGIN` 환경 변수 기반, 허용되지 않은 origin 차단
- **WebSocket maxPayload**: 64KB 제한
- **입력 큐 크기 제한**: 플레이어당 최대 120개 (2초분), DoS 방지
- **JWT_SECRET 프로덕션 필수**: 미설정 시 서버 시작 거부

### 기존 서버 검증 (변경 없음)
- 스킬 쿨다운 서버 검증 (`rpgServerSkillSystem.ts`)
- 업그레이드 골드/캡 검증 (`rpgServerGameSystems.ts`)
- RTS 자원 비용/쿨타임/개수 검증 (`GameRoom.ts`)
- 영웅 생존 상태 체크 (`RPGServerGameEngine.ts`)
- 채팅 500ms rate limiting (`CoopRoomManager.ts`)

---

## 게임 밸런스

| 항목 | 값 |
|------|-----|
| 게임 시간 | 10분 |
| 맵 크기 | 4000 x 2400 |
| 기지 초기 HP | 1000 |
| 골드 자동 획득 | 기본 4/초 (업그레이드로 증가 가능) |

### AI 난이도

| 난이도 | 행동 주기 | 행동 확률 | 적 기지 HP | 특수 기능 |
|--------|----------|----------|-----------|----------|
| 쉬움 | 5초 | 60% | 1000 | - |
| 중간 | 2.5초 | 85% | 1200 | 2분에 대량 발생 1회 |
| 어려움 | 2초 | 95% | 1500 | 다중 소환 + 1분30초마다 대량 발생 |
| 극악 | 1.5초 | 98% | 2000 | 보스 페이즈 + 1분마다 대량 발생 |

#### 대량 발생 시스템
- **중간**: 2분에 검병+궁수+기사+힐러 무료 소환 (1회)
- **어려움**: 1분30초마다 대량 발생 (반복)
  - 첫 번째: 검병+궁수+기사+힐러 (마법사 제외)
  - 두 번째 이후: 검병+궁수+기사+마법사+힐러 (풀 조합)
- **극악**: 1분마다 검병+궁수+기사+마법사+힐러 대량 발생 (반복)
- 대량 발생은 AI 자원과 무관하게 무료로 소환됩니다.

#### 극악 난이도 페이즈 시스템

| 페이즈 | 조건 | 목표 |
|--------|------|------|
| 페이즈 1 | 게임 시작 | 적 본진 파괴 (HP 2000) |
| 페이즈 2 | 적 본진 파괴 | 보스 처치 |

- 적 본진을 파괴하면 **페이즈 2**가 시작되고 보스가 출현합니다.
- 보스를 처치해야 승리하며, 보스가 내 기지를 파괴하면 패배합니다.

### RTS 클리어 경험치

로그인 후 AI 대전을 클리어(승리)하면 플레이어 경험치를 획득합니다.

| 난이도 | 클리어 경험치 | VIP (2배) |
|--------|-------------|-----------|
| 쉬움 | 100 EXP | 200 EXP |
| 중간 | 250 EXP | 500 EXP |
| 어려움 | 700 EXP | 1,400 EXP |
| 극악 | 1,600 EXP | 3,200 EXP |

> - 패배 시 경험치 없음
> - 멀티플레이어/튜토리얼/보스테스트 모드는 경험치 없음
> - VIP 사용자는 경험치 2배 획득
> - 게스트 사용자는 경험치 저장 불가 (회원가입 필요)

---

## 버전 히스토리

### V1.24.0 (현재)
- **Boss2 암흑 마법사 추가 (지옥/종말 난이도)**
  - 기지 2개 파괴 시 각 기지 위치에서 Boss1 + Boss2가 함께 스폰 (총 4마리)
  - 원거리 마법사 타입: 사거리 250px, 보라색(#9900ff) 글로우/테마로 Boss1(빨강)과 시각적 구분
  - Boss2 난이도별 고정 스탯 (bossHpMultiplier/bossAttackMultiplier 미적용):
    - 지옥: HP 5000~10500, 공격력 150~240 (인원수별)
    - 종말: HP 7500~15000, 공격력 180~290 (인원수별)
- **Boss2 고유 스킬 6종**
  - 암흑 구체(6초, AoE 폭발), 그림자 소환(18초, 졸개 3마리)
  - 공허의 영역(15초, 5초 지속 DoT 장판), 암흑 유성(20초, 각 영웅 위치 낙하)
  - 영혼 흡수(12초, AoE 드레인+자힐), 순간이동(10초, 텔레포트)
- **지옥/종말 난이도 밸런스 하향**
  - Boss2 추가(보스 2→4마리)로 과도해진 체감 난이도 하향 조정
  - 지옥: 극한 대비 +10~15% 수준 (적HP 6.0→4.5, 적ATK 4.0→3.3 등)
  - 종말: 기존 지옥 수준 (적HP 9.0→6.0, 적ATK 5.2→4.0 등)
  - 골드/경험치 보상 비례 하향, 기지 파괴 골드: 지옥 450→350, 종말 650→500
- **보스 기본공격 이펙트 추가**
  - Boss1: 빨간색/검은색 충격파 파티클
  - Boss2: 보라색/암흑 마법 충격파 파티클
  - 영웅/넥서스 공격 시 피격 위치에 이펙트 표시
- **보스 시전 중 영웅 전멸 시 멈춤 버그 수정**
  - 영웅 전멸 시 보스의 currentCast가 해제되지 않아 영구 캐스팅 상태로 멈추던 문제 수정
  - 시전 즉시 취소 후 넥서스로 이동 재개
- **보스 렌더링 통합**: `isBossType()` 유틸리티로 Boss1/Boss2 공통 처리
  - Boss2 HP 텍스트, 공격 모션, 기절 이펙트 정상 표시
  - 미니맵 보라색 점, 6개 스킬 경고 시각화, 공허의 영역 장판 렌더링
- **게임 오버 보스 수 수정**: 지옥/종말 난이도에서 총 보스 수 4마리로 정확히 표시
- 서버/클라이언트 ~33곳 `type === 'boss'` → `isBossType()` 교체

### V1.23.11
- **마법사 계열 SP 업그레이드: 공격속도 → 스킬 쿨타임 감소**
  - 마법사/대마법사/힐러의 SP 업그레이드에서 "공격속도"를 "스킬 쿨타임 감소"로 교체
  - 레벨당 1% 감소, 최대 30레벨 = 30% 감소 (W/E 스킬에만 적용, Q 자동공격 영향 없음)
  - 전사/기사/궁수 계열은 기존 공격속도 업그레이드 유지
  - 스킬 툴팁에 감소된 실제 쿨다운 시간 표시
  - 서버 스킬 쿨다운 22+ 위치 하드코딩 제거 → `hero._skillW/E.cooldown` 참조로 통일
- **버서커 밸런스 너프**
  - 패시브 피해흡혈 배율: 1.5배 → 1.3배
  - 궁극기(광란) 공격력/공격속도 증가: 100% → 80% (지속시간 10초 유지)
  - 직업 도감 데이터 동기화: 광란 설명/수치를 너프된 값(80%)으로 수정
- **SP 초기화 버그 수정**: skillCooldown 필드 누락으로 리셋 시 SP가 정상 반환되지 않던 문제 수정
- **다시하기 시 경험치 중복 저장 방지**: expSavedRef 리셋 로직 추가
- **RPG 레거시 싱글플레이어 코드 정리**
  - RPG 모드는 솔로 플레이도 서버 권위 모델로 전환됨 → `isMultiplayer` 분기 불필요
  - 7개 파일에서 `isMultiplayer` 조건문 제거/단순화 (튜토리얼 로컬 모드 경로는 유지)
  - `RPGModeScreen.tsx`: 싱글플레이 init/retry/통계 분기 제거, 결과 UI 항상 멀티플레이 경로
  - `PauseScreen.tsx`: RPG 조건문에서 `isMultiplayer` 제거, 싱글전용 버튼 제거
  - `VirtualJoystick.tsx`, `TouchSkillButtons.tsx`, `useRPGInput.ts`: 이동/스킬 전송 가드 단순화
  - `useRPGGameLoop.ts`, `useRPGStore.ts`: 주석 "싱글플레이" → "로컬 모드(튜토리얼)"
- **이동 텔레포트 버그 수정 + 배포 환경 이동 둔화 수정 (위치 동기화 개선)**
  - 프레임 드랍 시 deltaTime 클램핑으로 서버/클라이언트 위치 드리프트 누적 → 순간이동 발생
  - 보정 크기 상한(cap) 도입: 정지 중 5px/프레임 (큰 차이에서도 부드러운 수렴)
  - 스냅 임계치: 200px → 400px (부활/초기 생성 등 극단 상황에만 적용)
  - 이동 중 100% 로컬 예측 (서버 보정 제거): 레이턴시로 인한 역방향 드래그/속도 저하 원천 차단
  - 정지 시 데드존 20px + lerp 20% + cap 5px (슬라이딩 제거)
  - 서버 위치 보정: 방향 기반 보정으로 전환 (이동 방향과 dot product 계산, 전방 50%/후방 15% 차등 보정, 200px+ 즉시 스냅)
  - 지속 이동 중 주기적 위치 보고 간격 단축 (1초 → 300ms)으로 드리프트 누적 방지 강화
- **스킬 미발동 + 쿨다운만 감소 버그 수정**
  - PLAYER_INPUT rate limiter(15ms)가 이동 입력과 스킬 입력을 동시 제한하여 스킬 메시지 드랍
  - 스킬/업그레이드 입력은 rate limit에서 제외 (서버 자체 쿨다운/골드 검증으로 보안 유지)
- **서버 스킬 쿨다운 허용 오차 추가**
  - `skill.currentCooldown > 0` → `> 0.05` (3프레임 허용 오차)
  - 클라이언트-서버 타이밍 차이로 쿨다운이 미세하게 남았을 때 스킬 사용 불가 방지

### V1.23.10
- **이동 중 텔레포트(순간이동) 버그 수정** (웹/태블릿 공통)
  - 영웅 속도 폴백 값 `|| 200` → `|| 3`으로 수정 (5개 파일)
  - 정상 속도 2~3인데 폴백이 200(70배)이어서, `config.speed`가 falsy일 때 프레임당 200px 이동 발생
  - 클라이언트: `useRPGGameLoop.ts`, `heroUnit.ts`, `useRPGStore.ts` / 서버: `rpgServerHeroSystem.ts`
- **멀티플레이 이동 중 점진적 드리프트 보정**
  - 서버/클라이언트 프레임/틱 드롭 시 deltaTime 클램핑(0.05s)으로 위치 차이 누적 → 하드 스냅 발생
  - 기존: 이동 중 로컬 예측 100% 신뢰 + 150px 스냅 → 보정 없이 드리프트 누적
  - 변경: 30px 초과 시 0~30% 점진적 보정 + 스냅 임계치 200px 상향
- **태블릿 viewport meta initial-scale 명시**
  - 태블릿 일반 모드에서 `initial-scale` 미지정 시 일부 브라우저가 스케일을 잘못 계산하는 문제 수정
  - 실제 화면 너비 기반으로 `initial-scale` 정밀 계산하여 viewport meta에 추가
- **전체화면 전환 리사이즈 폴링 방식 변경**
  - 고정 타임아웃(150ms/500ms) → 뷰포트 높이 변경 감지 폴링 (100ms 간격, 최대 1초)
  - 전체화면 애니메이션이 느린 기기에서 캔버스가 스테일 크기로 남는 문제 해결
- **터치 스킬 버튼 이벤트 개선**
  - 스킬 버튼에 `touchAction: 'none'` 추가로 브라우저 기본 터치 동작 억제

### V1.23.9
- **태블릿(iPad) 인게임 전체화면 비활성화**
  - 태블릿에서 RTS/RPG 인게임(캔버스) 진입 시 전체화면 자동 해제
  - RTS: 게임 종료 → 결과 화면(GameOverScreen) 전환 시 전체화면 자동 복원
  - RPG: 결과 오버레이 표시 중 전체화면 비활성화 유지, 사용자가 나갈 때 복원
  - 태블릿 인게임 중 방향 전환/전체화면 프롬프트 자동 진입 억제
- **핸드폰/태블릿 전체화면 디바이스별 분기**
  - 핸드폰 전체화면: V1.23.7 CSS zoom 방식 복원 (html 전체화면 + `documentElement` zoom)
  - 태블릿 전체화면: body 전체화면 + viewport meta `initial-scale` (CSS zoom 미사용)
  - Safari iPad html 전체화면 시 viewport meta 리셋 문제 회피

### V1.23.8
- **RPG 기본공격 적+기지 동시 공격 버그 수정**
  - `executeQSkill()`에서 적 타격 후에도 기지 데미지가 추가 적용되던 버그 수정
  - 기지는 범위 내 적이 없을 때만 대체 타겟으로 공격 (`hitEnemies.length === 0` 조건)
  - 패시브 해금 전 궁수가 적과 기지를 동시에 공격하던 현상 해결
- **이동 보간 8% 미세보정 롤백**
  - 이전 커밋의 이동 중 서버 보정(8%) 및 시전 후 조이스틱 방향 재전송 제거
  - 오히려 이동 품질이 악화되어 원래 로직(100% 로컬 신뢰)으로 복원
- **RTS 인게임 iPad Safe Area 대응**
  - `viewport-fit=cover`로 인해 둥근 모서리/홈 인디케이터 영역에 UI가 잘리던 문제 수정
  - ResourceBar, GameTimer, HP 상태 패널, 하단 패널, 미니맵에 `env(safe-area-inset-*)` 적용
  - `max(기존값, env(safe-area-inset))` 패턴으로 safe area 없는 기기에서는 기존과 동일
- **전체화면 해제 시 자동 재진입 프롬프트**
  - 키보드 열림, 시스템 제스처 등으로 전체화면이 해제되면 재진입 안내 표시
  - 입력 필드 포커스 중이면 blur 후 500ms 대기 → 키보드 닫힌 후 프롬프트
  - 기타 해제 시 500ms 후 즉시 프롬프트 표시
- **로그인 세션 복원 시 WebSocket 자동 재연결**
  - 페이지 새로고침 시 `initialize()`에서 세션 복원 후 `wsClient.notifyLogin()` 호출
  - WebSocket 연결 + `USER_LOGIN` 전송 → 온라인 상태 자동 복원
- **탭 전환 복귀 시 WebSocket 자동 재연결**
  - `visibilitychange` 이벤트 리스너 추가: 탭 복귀 시 연결 확인 + 재연결
  - `currentLogin` 영구 저장: 재연결 시 `onopen`에서 `USER_LOGIN` 자동 재전송
  - 탭 복귀 시 `reconnectAttempts` 리셋 (백그라운드 실패 후에도 재시도 가능)
  - `pendingConnect` 플래그로 동시 연결 시도 중복 방지
- **전체화면 하단 UI 잘림/스크롤 수정 (iPad/Phone)**
  - CSS zoom 방식 완전 제거 → viewport meta `width=1280` 통일
  - 전체화면 대상을 `document.documentElement` → `document.body`로 변경
  - html을 전체화면으로 하면 Safari가 viewport meta를 device-width로 리셋 → 스케일링 해제 → 스크롤 발생
  - body를 전체화면으로 하면 viewport meta가 유지되어 정상 스케일링
  - 전체화면 시 `initial-scale` 명시적 설정으로 추가 보강
  - body `:fullscreen` CSS 규칙 추가 (전체화면 시 body가 화면 채우도록)

### V1.23.7
- **재시작 시 붉은 모서리 이펙트 버그 수정**
  - 영웅 사망/null 시 `vignetteIntensity`가 0.8(최대)을 반환하던 버그 수정 → 0 반환
  - 게임 재시작 시 붉은 비네팅이 잔존하는 현상 해결 (웹/터치 환경 모두)
- **터치 디바이스 자동 전체화면**
  - 가로 회전 시 자동 `requestFullscreen()` 시도
  - 자동 전체화면 실패 시 "화면을 터치하여 전체화면으로 전환" 폴백 프롬프트
  - 세로 회전 시 전체화면 자동 해제
  - `fullscreenchange` 이벤트에서 뷰포트 메타 재적용 (스케일링 유지)
  - iPhone Fullscreen API 미지원 감지 (프롬프트 표시 안함)
- **비밀번호 변경 기능 추가**
  - 서버: `PATCH /api/auth/password` 엔드포인트 (현재 비밀번호 검증 후 변경)
  - 설정 모달 "프로필" 탭 → "보안" 탭으로 변경 (닉네임 변경 제거, 비밀번호 변경 UI)
  - 현재 비밀번호, 새 비밀번호, 새 비밀번호 확인 3단계 검증
- **회원가입 닉네임/아이디 중복 검사**
  - 서버: `GET /api/auth/check-nickname`, `GET /api/auth/check-username` 엔드포인트
  - 닉네임: "중복확인" 버튼으로 명시적 확인 (확인 전 가입 차단)
  - 아이디: 입력 시 500ms 디바운스 자동 확인, 하단에 사용 가능(초록)/중복(빨강) 실시간 표시
  - 회원가입 폼 순서 변경: 닉네임 → 아이디 → 비밀번호 → 비밀번호 확인
- **채팅 비속어 필터 추가** (서버 측)
  - `server/src/utils/profanityFilter.ts` 신규: 한국어/영어 비속어·19금 단어 목록 기반 필터
  - 한국어 ~120개, 영어 ~100개 단어 목록 (욕설, 성적 표현, 인종 비하 등)
  - 초성 욕설(ㅅㅂ, ㅂㅅ 등), 공백 삽입 우회, 숫자/특수문자 치환 변형 대응
  - 영어 단어 경계(`\b`) 매칭으로 오탐 방지 (class→ass 등)
  - 로비 채팅 `sendLobbyChatMessage()`에서 서버 측 필터링 후 브로드캐스트
- **모바일 전체화면 viewport 스케일링 수정**
  - 전체화면 진입 시 모바일 브라우저가 viewport meta를 무시하는 문제 대응
  - 이중 스케일링 전략: 일반 모드는 viewport meta(`width=1280+`), 전체화면은 CSS zoom(`physW / viewportWidth`)
  - `updateViewportMeta()`에서 `isFullscreenActive()` 체크 후 자동 전환
  - 전체화면 해제 시 CSS zoom 제거 + viewport meta 복원
  - 캔버스 CSS zoom 보상: `useCanvas`에서 `window.innerWidth / zoom`으로 버퍼 크기 확대 (RPG/RTS 공통)
  - html 크기 zoom 역수 보상: `width: ${100/zoom}vw`, `height: ${100/zoom}vh`로 h-full 체인이 화면 채우도록 확대
  - 전체화면 전환 후 `resize` 이벤트 발송으로 캔버스 재측정 트리거
  - 데미지 숫자 CSS zoom 보상: `RPGDamageNumbers`에서 `innerWidth/Height / cssZoom`으로 화면 좌표 변환
  - 가상 조이스틱 CSS zoom 보상: `handlePointerDown`/`updateDirection`에서 `clientX/Y / cssZoom` 보정
  - 가상 조이스틱 크기 증가 (BASE_RADIUS 50→60, KNOB_RADIUS 20→25, MAX_DRAG 50→60)
  - 가상 조이스틱 기본 위치 하향 (Y 75%→82%)
- **게임 재시작 시 붉은 피격 플래시 잔존 버그 수정**
  - `damageFlashIntensity`에서 `timeSinceDamage < 0` 체크 추가 (이전 게임 데이터 방지)
  - `applySerializedState`에서 게임 재시작 감지: `gameTime < lastDamageTime - 1`이면 리셋
- **터치 스킬 자동 타겟에 적 기지 추가**
  - 탭으로 스킬 사용 시 적이 없으면 가장 가까운 적 기지 방향으로 발사
  - 기존: 적 없을 때 `facingRight` 방향(오른쪽) 고정 → 적 기지 무시됨

### V1.23.6
- **모바일 터치 환경 개선**
  - 더블탭 줌 방지: 모든 인터랙티브 요소에 `touch-action: manipulation` 전역 적용
  - 터치 하이라이트 제거: `*`에 `-webkit-tap-highlight-color: transparent` 적용
  - 업그레이드 버튼 터치 이벤트 개선: `onClick` → `onPointerDown`으로 변경 (모바일 300ms 딜레이 제거)
  - `stopPropagation` + `preventDefault`로 이벤트 전파 차단 → 업그레이드 시 이동 멈춤/버그 해결
  - 업그레이드 버튼 및 컨테이너에 `touch-action: none` 적용
  - 업그레이드 버튼 크기 확대: 폰 62px→68px, 태블릿 52px→56px (아이콘·라벨도 확대)
  - 업그레이드 가능/불가능 시각 구분 강화: 가능 시 밝은 시안 글로우, 불가능 시 `opacity-50`, MAX 시 노란 테두리

### V1.23.5
- **서버 보안 강화**
  - Rate Limiting: 이동/스킬/업그레이드/방 생성·참가에 플레이어별 속도 제한 적용
  - 입력 검증: 좌표 범위, 방향 벡터, 스킬슬롯, 업그레이드 타입 서버 검증 추가
  - Helmet 미들웨어: HTTP 보안 헤더 자동 설정
  - CORS 화이트리스트: `CORS_ORIGIN` 환경 변수 기반 origin 필터링 (`*` → 허용 목록)
  - WebSocket maxPayload 64KB 제한
  - 입력 큐 크기 제한: 플레이어당 120개 (DoS 방지)
  - JWT_SECRET 프로덕션 필수화: 미설정 시 서버 시작 거부

### V1.23.4
- **RPG 이동 보간 튜닝**
  - 데드존 15px → 8px, 보정 lerp 15% → 30%, 시전 스냅 임계 50px → 30px
  - 보간 지속시간 `_serverUpdateInterval × 1.15` → `× 1.0` (과보간 제거)
  - 소규모 이동 및 이동 스킬 사용 시 반응성 개선
- **RPG 저격수 궁극기(E) 이펙트 중복 표시 수정**
  - `pendingSkill` 처리 시 0.5초 중복 이펙트 생성 제거 (서버 + 클라이언트)
  - 시전 시 생성된 이펙트만 유지, 데미지 적용은 정상 동작
- **공격속도 0.3초 캡 부동소수점 정밀도 수정**
  - `0.33 - 0.03 = 0.30000000000000004` → `<= 0.3` 비교 실패 문제
  - `<= 0.3` → `< 0.31`로 변경 (서버 + 클라이언트 5개 파일)
  - 공격속도 0.3 도달 시 업그레이드 버튼 MAX 표시 정상 동작

### V1.23.3
- **태블릿/모바일 뷰포트 스크롤 수정**
  - `100dvh` (Dynamic Viewport Height) 적용으로 모바일 브라우저 주소창 높이 보정
  - `html/body/#root` 높이 체인 구성, 게임 화면 `h-screen` → `h-full` 전환
- **RTS 일시정지 버튼 위치 개선**: HP 상태 패널(내 본진/적 본진) 왼쪽에 간격을 두고 배치
- **RTS 터치 튜토리얼 설명 적용**
  - 터치 기기에서 마우스/키보드 설명을 터치 조작으로 자동 변환
  - 카메라 조작: 한 손가락 드래그, 두 손가락 핀치 줌
  - 키보드 단축키(Q/W/E) 표기 제거, "클릭" → "터치" 변환
- **RPG 저격수 궁극기(E) 타겟 추적 수정**
  - 3초 조준 중 타겟이 이동해도 조준선·조준경이 실시간으로 따라감
  - 서버 이펙트에 `targetId` 추가, 렌더러에서 매 프레임 적 위치 갱신

### V1.23.2
- **RTS 벽(Wall) → 지뢰(Mine) 시스템 전면 교체**
  - 서버/클라이언트/멀티플레이어 일괄 전환 (벽 생성·HP·만료 → 지뢰 설치·트리거·AoE 폭발)
  - 벽 렌더러 삭제 (`drawWall.ts`), 지뢰 렌더러 추가 (`drawMine.ts`)
  - 지뢰 폭발 파티클 이펙트 및 사운드 추가
  - 유닛 AI에서 벽 타겟팅 로직 제거 (combatUnit, mageUnit 간소화)
- **RTS 튜토리얼 개선**
  - 지뢰 스텝 시각적 데모: 약한 적(HP 50) 소환 → 지뢰로 처치하는 체험
  - 스텝 순서 변경: 힐러를 공격 유닛(검병→궁수→기사→마법사) 이후로 이동
  - 시작 자원 증가 (나무 200, 돌 200, 약초 10, 크리스탈 50)
  - 자원 수집 대기 스텝(`wait_wood`, `wait_stone`)에 최소 표시 시간 3초 추가
- **UI 개선**
  - 일시정지 버튼: 데스크톱에서 숨김, 터치 기기(모바일/태블릿)에서만 표시
  - 힐 사운드 쿨다운: 50ms → 2초 (사운드별 개별 쿨다운 지원)
- **RTS 전투 BGM 추가**: 마칭 리듬 기반 프로시저럴 BGM

### V1.23.1
- **모바일/태블릿 인게임 UI 개선** (상세: [`docs/mobile-responsive.md`](docs/mobile-responsive.md))
  - 폰/태블릿 디바이스별 UI 크기·위치 분기 (`isTablet` / `isMobile`)
  - RPG 스킬 버튼: 가로 배치, 크기 확대 (폰 95px / 태블릿 80px)
  - RPG 업그레이드: 토글 방식 → 3열 상시 표시 그리드 (폰 62px / 태블릿 52px)
  - RPG 미니맵: 디바이스별 위치 분기 (폰 40% / 태블릿 30% / 데스크톱 하단)
  - RTS 하단 패널: 디바이스별 패딩·높이 조정 (내비바 회피)
  - RTS 일시정지 버튼: HP 패널과 겹침 해소 (터치 기기 top 10.5rem)
- **전체화면 버튼 제거**: `FullscreenButton.tsx` 삭제 (RPG/RTS 모두)
- **조이스틱 가시성 향상**: opacity 0.3 → 0.6, 테두리·노브 밝기 증가
- **사망 시 카메라 조작**: 조이스틱으로 카메라 자유 이동 (관전 모드)
- **부활 시 카메라 스냅**: 사망→생존 전환 감지, `followHero: true` 자동 복원
- **부활 타이머 단순화**: 웨이브 기반 가변 시간 → 고정 10초 (레거시 코드 정리)
- **튜토리얼 보스 미출현 버그 수정**: `damageBase`에서 `gamePhase`를 조기 전환하여 게임 루프의 보스 스폰 코드가 스킵되던 경합 조건 해소
- **터치 스킬/업그레이드 버튼 활성·비활성 UI 구분 강화**
  - 사용 가능: 색상 그라데이션 배경 + 글로우 효과 (스킬: 파란~남색, 업그레이드: 시안 틴트)
  - 사용 불가: 어두운 배경 + 아이콘·텍스트 투명도 감소로 시각적 차이 명확화

### V1.23.0
- **모바일/태블릿 반응형 UI 완성** (상세: [`docs/mobile-responsive.md`](docs/mobile-responsive.md))
  - Viewport 메타 스케일링 방식 채택: 모바일에서 `width=1280` 고정, 데스크톱 UI를 비례 축소
  - 디바이스 감지 시스템 (`useDeviceDetect.ts`): Phone/Tablet/Desktop 자동 분류, uiScale 적용
  - 화면 방향 관리: 세로 모드 회전 안내
- **RPG 모드 터치 컨트롤 통합**
  - 가상 조이스틱: 왼쪽 하단 고스트 힌트 표시, 터치 시 플로팅 활성화 (WASD 대체)
  - 터치 스킬 버튼: W/E 스킬 탭(자동 타겟)/드래그(방향 지정) 지원 (Shift/R 대체)
  - 터치 업그레이드 토글: 스킬 왼쪽에 배치, 토글 시 2x3 업그레이드 그리드 표시
  - 데스크톱에서는 기존 UI 유지, 터치 디바이스에서만 터치 컨트롤 표시
- **캔버스 입력 Pointer 이벤트 마이그레이션**
  - RTS/RPG 캔버스 Mouse → Pointer 이벤트 전환 (마우스+터치 통합)
  - 터치 전용 동작: 한 손가락 드래그(카메라 팬), 두 손가락 핀치(줌)
- **UI 컴포넌트 반응형 대응**
  - RPG 영웅 패널/타이머/웨이브 정보: 폰 컴팩트 레이아웃
  - RTS 리소스바: 폰에서 라벨 숨김, 축소 아이콘
  - 모달 8종: vw 기반 너비 + max-width 제한
  - 메뉴/선택 화면 8종: flex-wrap, 반응형 크기
  - RPG 협동 로비: 모바일 가로 모드 전용 레이아웃
- **CSS 터치 최적화**: 텍스트 선택 방지, Safe Area 대응, 캔버스 touchAction
- **방 타임아웃 경고 초기화 수정**: 새 방 생성/참가 시 이전 방 경고 메시지 초기화

### V1.22.10
- **서버 브로드캐스트 주기 개선**: 50ms (20Hz) → **33ms (~30Hz)**
  - 다른 플레이어 및 적 위치 업데이트 1.5배 빈번해져 부드러움 향상
  - `RPGServerGameEngine.ts`: `BROADCAST_INTERVAL = 33`
- **적응형 보간 시스템 도입**
  - 하드코딩된 60ms 보간 시간 → 실제 서버 업데이트 간격 기반 자동 조절
  - EMA(지수이동평균)로 서버 간격 추적 (`_serverUpdateInterval`)
  - 보간 시간: `_serverUpdateInterval * 1.15` (최소 20ms)
  - 속도 계산 및 예측 이동도 적응형으로 변경

### V1.22.9
- **서버-클라이언트 스킬 로직 전면 동기화** (8개 항목 불일치 수정)
  - 저격수 W: 단일 타겟 → 전방 60도 범위 + 기지 데미지
  - 저격수 E: 즉시 발동 → 3초 시전 + 마우스 위치 기반 타겟팅 + 보스 우선
  - 레인저 W 산탄 각도 30°→45°, 힐러 W 힐 범위 200→150px
  - 버서커 E: lifesteal 제거 + damageTaken 유지, 팔라딘 Q: 아군 최대HP 5% 회복
- **스킬 호버 범위 표시 개선**
  - 버프 스킬 범위 표시 제거, 다크나이트/힐러 E 캐릭터 중심 원형 범위
  - AoE 범위 미리보기: 마우스 위치 → 캐릭터 전방 100px
- **데미지 숫자 중복 표시 수정** (멀티플레이)
- **멀티플레이 부활 시 카메라 추적 버그 수정**
  - 사망 중 카메라 이동 후 부활 시 카메라가 영웅을 따라가지 않던 문제 해결
- **사망/부활 시 상태 정리 강화**
  - 보스 공격으로 사망 시 다크블레이드 이펙트가 남아있던 문제 수정
  - 부활 시 darkBladeActive, darkBladeTickTimer, 버프 완전 초기화
- **RTS 멀티플레이 기지 업그레이드 비용 표시 수정**
  - 멀티플레이에서 싱글플레이 레벨 기준으로 비용이 표시되던 문제 해결

### V1.22.8
- **RPG 부활 시 체력 100% 회복**
  - 기존 50% → 100%로 변경
- **사망 시 상태 완전 초기화**
  - 다크나이트 어둠의 칼날(E) 자동 해제
  - 모든 버프/디버프 즉시 해제 (광전사, 철벽, 무적, 이속, 기절 등)
- **W/E 스킬 이펙트 위치 보정**
  - 이동 중 스킬 사용 시 이펙트가 영웅 뒤에 표시되던 문제 수정
  - 영웅 중심 이펙트 12종이 영웅 현재 위치를 실시간 추적
- **보스 돌진 스킬 경로 표시 버그 수정**
  - 시전 시 돌진 경로(파란색 직선)가 표시되지 않던 문제 해결

### V1.22.7
- **RPG 난이도 밸런스 대폭 조정**
  - 중간/어려움/극한 난이도 배율 전체 상향 (전직 파워 스파이크 반영)
  - 중간 난이도 추가 조정: L15 전직 DPS 3배 점프 반영 (적HP 1.8→2.2, 적ATK 1.5→1.6)
  - 어려움: 적HP 2.5→2.8, 적ATK 2.0→2.2
  - 극한: 적HP 3.5→4.0, 적ATK 2.8→3.0
- **난이도별 유닛 등장 시간 가속 (`unitTimeMultiplier`)**
  - `DifficultyConfig`에 `unitTimeMultiplier` 필드 추가
  - 쉬움 1.0x, 중간 1.3x, 어려움 1.6x, 극한 2.0x
  - 극한: 1분에 원거리, 2분에 기사, 3분에 전 유닛 등장
- **밸런스 설계 근거**
  - 목표 반영률: 플레이어 성장의 ~55% (전직/2차강화 포함)
  - 반영률: 중간 55%, 어려움 57%, 극한 58%
  - 난이도 차별점: 1:1 전투는 비슷, 스폰 압력 + 보스 스킬이 핵심 차이

### V1.22.6
- **RTS 튜토리얼 흐름 전면 개편**: 지원 유닛 우선 → 공격 유닛 후반 (25스텝 → 21스텝)
  - 채집꾼 → 약초 판매 → 나무꾼 → 광부 → 금광부 → 힐러 → 기지 강화 → 벽 건설 → 전투 유닛
  - 약초 판매를 초반 핵심 골드 전략으로 강조
  - 채집꾼의 크리스탈 확률 획득 설명 추가
  - 공격 유닛 고용 시점부터 적 소환 시작 (그 전에는 적 나오지 않음)
  - 튜토리얼 초기 자원 하향 (자원 유닛 필요성 강조)
- **RTS 난이도별 클리어 경험치 도입**
  - 쉬움 100, 중간 250, 어려움 700, 극악 1600 EXP (승리 시)
  - VIP 2배 보너스 유지
  - 멀티플레이어/보스테스트 경험치 제거 (악용 방지)
  - 패배 시 경험치 제거

### V1.22.5
- **적 기지 비주얼 개선**: 단순 빨간 사각형 → 미니 마왕성 스타일 성채
  - 어두운 석재 톤 성벽 + 상단 톱니 흉벽
  - 좌우 사각 탑 (적갈색 삼각 지붕 + 빛나는 창문)
  - 아치형 정문 (내부 빛 효과)
  - 펄럭이는 깃발 애니메이션
  - 맥동하는 코어 (HP 비율에 따라 색상 변화)
- **적 기지 라벨 제거**: LEFT/RIGHT/TOP/BOTTOM BASE 텍스트 삭제

### V1.22.4
- **다크나이트 밸런스 조정**
  - W스킬(암흑 찌르기): HP 소모 11% → 20%, 공격 범위 120px → 150px (전방 직선 150px×80px)
  - E스킬(어둠의 칼날): 초당 HP 소모 3% → 5%, 초당 데미지 100% → 120%
- **적 타겟팅 AI 개선**
  - 감지 범위 내 클래스 우선순위(기사>전사>기타)가 어그로보다 우선 적용
  - 근접 영웅이 어그로 없는 원거리 영웅보다 먼저 타겟팅됨
- **시전형 스킬 버그 수정**
  - W스킬 시전 중 캐릭터 밀림(pushback) 현상 수정
  - 시전 중 이동 입력 차단, 시전 종료 후 누르고 있던 키로 이동 자동 재개
- **보스 스킬 넥서스 데미지**
  - 강타(smash), 돌진(charge) 스킬이 넥서스에도 데미지 적용
  - 충격파(shockwave): 즉사 데미지로 변경 (캐릭터에게만, 넥서스 미적용), 경고 메시지 추가
  - 밀치기(knockback): 데미지 제거 (넉백만)
- **레벨업 알림 개선**
  - 전직 후 레벨업 시 전직 직업 이름/이모지 표시 (기존: 기본 직업만 표시)

### V1.22.3
- **다크나이트 스킬 리워크** - "HP를 소모하여 강한 데미지를 내는 암흑기사" 컨셉
  - W스킬: 암흑 베기(돌진) → 암흑 찌르기(Dark Pierce) - 1초 시전, HP 11% 소모, 350% 데미지, 전방 직선 120px×80px, 4초 쿨
  - E스킬: 5초 고정 지속 → 토글 온/오프 - 초당 HP 3% 소모, 초당 100% 데미지 (150px), 자동 해제(HP≤10%/기절), 2초 재사용 딜레이
  - 패시브 피해흡혈 30% → 20%로 하향
  - E스킬 활성 시 기사 패시브 HP리젠 비활성화
  - 스킬바에 토글 활성 상태 표시 (보라색 글로우 + ON 뱃지)
  - 이펙트: 강타 차징/충격파, 어둠의 칼날 회전 검 (heroId 추적)
- **문서 업데이트**
  - `docs/job-advancement.md`, `docs/rpg-mode.md`, `docs/server-authority-model.md` 다크나이트 스킬 정보 갱신

### V1.22.2
- **서버 성능 최적화** (CPU 50-70% 감소, GC 압력 60-80% 감소 목표)
  - JSON.stringify 1회 통합: 4인 플레이 기준 초당 60회 중복 stringify 제거
  - 스킬 캐시 (`_skillQ/W/E`): `hero.skills.find()` 배열 탐색을 직접 참조로 대체
  - 이펙트/버프 인플레이스 처리: `.filter()` → 역순 `for` + `splice` (초당 900개 배열 할당 제거)
  - `Date.now()` 틱당 1회 캐시 (`state.currentTickTimestamp`)
  - `distanceSquared()` 도입: 범위 비교에서 `Math.sqrt` 제거 (초당 6,000-12,000회)
  - 입력 큐 최적화: `queue.shift()` O(n) → 인덱스 순회 + 일괄 정리
  - 적 직렬화 단일 패스: `.filter().map()` → 단일 `for` 루프
  - 승리 조건 체크 배열 제거: `Array.from().filter()` → 카운터 변수
- **서버 전용 최적화**: 클라이언트 수정 없음, 게임 동작 변경 없음

### V1.22.1
- **다크나이트 E스킬(어둠의 칼날) 수정**
  - 서버-클라이언트 스킬 구현 불일치 수정 (즉시 데미지 → 5초간 틱 데미지)
  - 5초 지속, 초당 공격력 75% 데미지, 범위 150px
  - 이펙트 리디자인: 암흑검 3자루가 캐릭터 주위를 회전하는 비주얼
  - heroId 기반 위치 추적으로 이펙트가 캐릭터를 따라다님
  - 이동 시 잔상 이펙트 남는 버그 수정 (틱 이펙트 생성 제외)
- **게임 시작 안정성 개선**
  - 카운트다운 "0" 표시 버그 수정 (React 조건부 렌더링)
  - 서버 엔진 생성 오류 시에도 게임 시작 메시지 전송 보장
  - WebSocket 메시지 핸들러 개별 오류 격리 (한 핸들러 오류가 다른 핸들러 차단 방지)
- **밸런스 조정**
  - 레인저 E스킬: 지속시간 5초 → 6초, 이동속도 보너스 3배 → 2배
  - 스나이퍼 사거리: 270 → 280
  - 대마법사 사거리: 315 → 300
  - 공격속도 최소 0.3초 제한 추가 (과도한 업그레이드 방지)
- **UI 개선**
  - 캐릭터 업그레이드 모달: "기본 스탯" → "현재 스탯"으로 변경, SP 업그레이드 반영
  - 공격속도 최대치 도달 시 안내 메시지 표시
  - 영웅 패널 중복 보너스 표시 제거

### V1.22.0
- **서버 권위 모델 아키텍처 정리**
  - 레거시 호스트-클라이언트 통신 코드 완전 제거 (~480줄)
  - `HostBasedClientMessage`, `HostBasedServerMessage` 타입 삭제
  - 레거시 메시지 핸들러 제거 (`HOST_GAME_STATE_BROADCAST`, `HOST_GAME_EVENT_BROADCAST`, `HOST_PLAYER_INPUT`, `HOST_GAME_OVER`)
  - 서버가 모든 게임 로직 실행, 방장은 UI 권한만 보유 (일시정지, 재시작, 설정)
- **문서 업데이트**
  - `docs/SERVER_ARCHITECTURE.md`: RPG 모드 아키텍처를 서버 권위 모델로 전면 수정
  - `docs/server-authority-model.md`: 레거시 호환성 섹션 제거, 변경 이력 추가
- **코드 품질 개선**
  - 미사용 import 및 함수 정리
  - TypeScript 컴파일 검증 완료

### V1.21.5
- **움직임/보간 시스템 개선**
  - 적 보간에 속도 기반 예측 이동 추가 (보간 완료 후 최대 50ms 예측)
  - 카메라 lerp 속도 조정 (0.15 → 0.3, 더 빠르고 부드러운 추적)
  - 카메라 위치 정수 반올림으로 서브픽셀 떨림 방지
  - 렌더러에서 lerp된 카메라 값 사용하도록 수정
  - 이동 정지 시 뒤로 밀림 버그 수정 (서버-클라이언트 동기화 개선)
- **자동 공격 버그 수정**
  - 기지 공격 시 공격속도 업그레이드 미적용 버그 수정
  - 적 공격과 동일하게 hero.config.attackSpeed 사용
- **데미지 숫자 중복 표시 버그 수정**
  - 싱글플레이에서 같은 데미지 숫자가 두 번 표시되던 버그 수정
  - 중복 방지 로직 강화 (원본 좌표 비교, 시간 창/위치 허용치 확대)
- **방 파기 타이머 수정**
  - 게임 중인 방은 10분 타이머 적용 안됨 (대기 중인 방만 해당)
  - 게임 종료 후 로비 복귀 시 타이머 리셋
- **UI 텍스트 변경**
  - "호스트" → "방장"으로 표기 변경
- **스킬 시스템 버그 수정 및 밸런스 조정**
  - 기사/가디언/팔라딘 W스킬 쿨다운 감소 기능 수정 (기본공격 적중 시 1초 감소)
  - 다크나이트 W스킬 쿨다운 8초 → 6초로 조정 (V1.22.3에서 강타로 리워크됨)
  - 클라이언트 스킬 쿨다운 동기화 버그 수정 (서버 쿨다운 감소가 무시되던 문제)
- **E스킬 쿨다운 서버-클라이언트 동기화**
  - 모든 전직 E스킬 쿨다운 일치 (Berserker 45초, Guardian 40초, Paladin 60초 등)
- **힐러 생명의 샘(E스킬) 개선**
  - 이펙트가 힐러를 따라다니도록 수정 (heroId 기반 위치 추적)
  - 500px 범위 내 아군만 힐 적용
- **기사 철벽 방어(E스킬) 수정**
  - 자신만 적용 → 팀 전체 적용으로 변경

### V1.21.4
- **멀티플레이 이동 부드러움 개선**
  - 다른 플레이어 보간 완료 후 예측 이동 추가 (최대 50ms)
  - 클라이언트 보간 시간 60ms로 조정 (서버 50ms + 10ms 버퍼)
  - 대각선 이동 방향 정규화 및 맵 경계 제한 추가
- **스킬 이펙트 시스템 검증 완료**
  - 모든 기본/전직 직업 Q/W/E 스킬 이펙트 서버-클라이언트 일치 확인

### V1.21.3
- **서버-클라이언트 로직 동기화**
  - 기사/가디언/팔라딘 Q→W 스킬 연계 (적중 시 W 쿨다운 1초 감소)
  - 힐러 W 스킬 적 데미지 추가 (치유의 빛)
  - 클래스 우선순위 타겟팅 (기사 > 전사 > 기타)
- **SP 공격속도 업그레이드 중복 적용 버그 수정**
  - 영웅 생성 시 `hero.config.attackSpeed`에 이미 반영된 SP 보너스가 쿨다운 감소 속도에 중복 적용되던 버그 수정
- **멀티플레이 이동 렉/끊김 개선**
  - 보간 시간 60ms → 50ms (서버 브로드캐스트 간격과 일치)
  - 다른 플레이어 클라이언트 예측 이동 제거 (떨림 방지)
  - 정지 시 스냅 보정 → 부드러운 15% 점진적 수렴
  - 서버 위치 보정 범위 확대 (10~300px, 50% 보정)

### V1.21.2
- **싱글/멀티플레이 버그 수정**
  - 싱글플레이 데미지 숫자 중복 표시 방지 (100ms 내 같은 위치/데미지 필터링)
  - 멀티플레이 넥서스 레이저 이펙트 타임스탬프 동기화
  - 멀티플레이 정지 상태 위치 보정 개선 (앞-뒤-앞 떨림 방지)
  - 기지 파괴 시 보스 즉시 스폰 로직 수정
  - 게임 종료 시 경험치 표시 개선

### V1.21.1
- **RPG 멀티플레이 이동 개선**
  - 적 위치 보간 시스템 추가: 멀티플레이에서 적 움직임이 부드럽게 표시
  - Delta time 클램핑 개선: 0.1초 → 0.05초로 변경하여 프레임 드랍 시 끊김 방지
  - 보간 시간 조정: 80ms → 60ms로 서버 동기화 간격(50ms)에 맞춤
- **궁수 기본공격 피격 이펙트 수정**
  - 서버에서 `hitTargets` 동기화 추가: 멀티플레이에서 화살 피격 마커/충격파 표시
- **보스 스킬 설정 동기화**
  - 밀어내기 스킬 넉백 거리 수정: 300px → 700px (클라이언트와 일치)
  - 보스 스킬 설정 전체 검토 및 클라이언트-서버 통일

### V1.21.0
- **RPG 서버 권위 모델 스킬 시스템 완성**
  - 8개 전직 클래스 W/E 스킬 서버 구현 (berserker, guardian, sniper, ranger, paladin, darkKnight, archmage, healer)
  - 스킬 슬롯 `key` 필드 도입 (`type` 접미사 대신 `key: 'Q' | 'W' | 'E'` 사용)
- **버프 시스템 확장**
  - `damageTaken` 속성 추가 (받는 피해 증가 디버프, 광란 스킬 등)
  - `moveSpeedBonus` 속성 추가 (이동속도 버프)
  - 버프 효과 적용 위치 정리 (damageReduction, lifesteal 등)
- **서버 모듈 분리**: 게임 로직을 기능별 모듈로 분리
  - rpgServerHeroSystem.ts (영웅 이동, 버프, 쿨다운)
  - rpgServerSkillSystem.ts (Q/W/E 스킬, 전직 스킬)
  - rpgServerEnemySystem.ts (적 AI, 스폰, 데미지)
  - rpgServerBossSystem.ts (보스 스킬 패턴)
  - rpgServerGameSystems.ts (넥서스, 골드, 업그레이드, 직렬화)
- **보스 즉시 스폰**: 양쪽 기지 파괴 시 보스가 다음 프레임이 아닌 즉시 스폰
- **개발 환경 개선**
  - 포트 충돌 자동 해결: `dev:all` 실행 시 8080 포트 자동 정리
- **버그 수정**
  - 버프/쿨다운 업데이트 순서 수정: `updateBuffs()` → `updateSkillCooldowns()` 순서로 변경하여 만료된 버프가 쿨다운 계산에 영향 주지 않도록 수정
  - 스킬 기지 데미지 누락 수정: 모든 데미지 스킬이 적 기지에도 데미지를 주도록 서버 로직 추가
  - 넥서스 레이저 서버-클라이언트 불일치 수정: 서버에서 범위 내 모든 적을 동시에 공격하도록 수정
  - ES6 모듈 안티패턴 수정 (`require` → `import`)
  - 이동 방향 0 나누기 방지
  - sniper E 스킬 사거리 제한 해제 (무제한 사거리)
  - darkKnight E 스킬 즉시 300% 데미지로 변경

### V1.20.20
- **RPG 멀티플레이 클라이언트 예측 + 서버 보정 아키텍처**: 즉각적인 이동 반응 + 부드러운 위치 보정
  - 이동 중: 로컬 위치 100% 신뢰 (200px 초과 시만 스냅)
  - 정지 시: 호스트 위치로 부드럽게 수렴
  - 돌진/시전/스턴 중에는 호스트 위치 100% 사용
- **RPG 멀티플레이 클라이언트 사운드 수정**: E/W 스킬, 기지 파괴, 게임 종료 사운드 재생
- **RPG 멀티플레이 보스 처치 수 버그 수정**: 게임 종료 시 정확한 stats 동기화

### V1.20.19
- **RPG 방 타임아웃 경고**: 방 생성 후 9분 경과 시 1분 전 경고 메시지 표시

### V1.20.18
- **RTS 멀티플레이 크리스탈 채집**: 채집꾼이 크리스탈 노드 채집 가능, 약초 채집 시 0.1% 크리스탈 보너스
- **싱글/멀티 밸런스 통일**: 채집 거리(50), 돌 재생성 시간(60초)

### V1.20.17
- **RTS 튜토리얼 대폭 개선**: 스포트라이트 방식으로 클릭 유도, 상세 유닛 설명 및 전략 팁 추가

### V1.20.16
- **로그아웃 시 연결 즉시 종료**: 로그아웃 시 WebSocket 연결도 함께 종료되어 접속자 수 즉시 감소

### V1.20.15
- **브라우저 종료 시 방 처리 개선**: 방 삭제/호스트 이전 정상 작동, 자동 로그아웃 로그 기록
- **RPG 방 목록 페이지네이션**: 5개 초과 시 이전/다음 버튼으로 탐색

### V1.20.14
- **보스 스킬 중복 시전 버그 수정**: 돌진 중 다른 스킬 사용 방지

### V1.20.13
- **힐러 밸런스 상향**: 힐 오로라 2%→4%, R 스킬 15초/5%→10초/10%
- **멀티플레이 2차 강화 미적용 버그 수정**: 방 생성/참가 시 전직 및 tier 정보 전달 누락 해결

### V1.20.12
- **온라인 상태 즉시 반영 안 되는 버그 수정**: 로그인 시 친구 목록에 온라인 상태가 간헐적으로 반영되지 않던 버그 해결
- **친구 삭제 UI 즉시 반영**: 낙관적 업데이트 적용으로 서버 응답 전 UI 즉시 업데이트
- **친구 요청 중복 키 오류 수정**: 친구 삭제 후 다시 요청 시 발생하던 DB 오류 해결
- **게임 초대 팝업 위치 변경**: 화면 중앙 상단에서 우측 상단으로 이동
- **같은 방 유저 초대 버튼 비활성화**: 이미 같은 방에 있는 플레이어에게 초대 불가
- **RTS AI 대전 게임중 상태 표시**: RTS 모드 AI 대전 시 친구 목록에 "게임중" 표시

### V1.20.11
- **클라이언트 이동 지속 버그 수정**: 창 포커스 잃을 때 키 상태 초기화 (blur/visibilitychange 핸들러 추가)
- **클라이언트 슬라이딩 현상 수정**: 이동 멈출 때 미끄러지는 현상 해결 (20px 미만 오차 무시)
- **클라이언트 로직 단순화**: 자동 공격/HP 재생/버프 로직 제거 (호스트 권위적 아키텍처)
- **위치 동기화 개선**: 이동 중 로컬 우선, 정지 시 호스트 위치로 수렴

### V1.20.10
- **클라이언트 자동 공격 미작동 버그 수정**: 클라이언트 영웅의 기본 공격이 자동으로 실행되지 않던 버그 해결
  - 클라이언트 블록에 자동 공격 로직 추가 (적/기지 감지, 스킬 요청 전송, 로컬 이펙트)
- **돌진 스킬 후 원위치 복귀 버그 수정 (개선)**: 돌진 완료 직후 서버의 이전 위치로 보정되는 버그 해결
  - 돌진 완료 시 위치 즉시 전송, "돌진 방금 완료" 상태 감지로 로컬 위치 유지

### V1.20.9
- **클라이언트 스킬 이펙트 만료 버그 수정**: 스킬 이펙트가 화면에 계속 남아있는 버그 해결
  - 클라이언트 블록의 early return 전에 이펙트 만료 체크 로직 추가
- **이동기 스킬 원위치 복귀 버그 수정**: 돌진 스킬 사용 후 원래 위치로 텔레포트하는 버그 해결
  - 로컬 영웅의 dashState는 서버 상태를 무시하고 클라이언트 예측 우선
- **클라이언트 기본공격 이펙트 미표시 버그 수정**: 클라이언트 영웅의 기본공격 이펙트가 보이지 않던 버그 해결
  - 호스트가 클라이언트 영웅의 기본공격 처리 시 `basicAttackEffect` 생성 및 동기화
- **메모리 누수 버그 수정**: 플레이어 연결 해제 시 관련 데이터가 정리되지 않던 버그 해결
  - `removeOtherHero`, `clearOtherHeroes`, `resetMultiplayerState`에서 `otherHeroesInterpolation` 등 정리

### V1.20.8
- **방 자동 파기 시 로비 이동 버그 수정**: 10분 타임아웃으로 방이 파기될 때 플레이어가 로비로 돌아가지 않던 버그 해결
  - 새로운 `COOP_ROOM_DESTROYED` 메시지로 플레이어 상태 초기화 및 로비 이동

### V1.20.7
- **클라이언트 스킬 이펙트 잔상 버그 수정**: 이펙트가 화면에 계속 남아있는 버그 해결
  - 다른 영웅 이펙트는 서버 것만 사용 (호스트가 권위)
  - 서버에서 만료된 이펙트가 클라이언트에서 자동 제거됨

### V1.20.6
- **클라이언트 스킬 이펙트 위치 버그 수정**: 스킬 이펙트가 사용 시점 위치에 고정되는 버그 해결
  - 모든 스킬 이펙트에 `heroId` 필드 추가하여 멀티플레이 이펙트 병합 개선
  - 자신의 이펙트는 로컬 상태 유지, 다른 플레이어 이펙트는 서버에서 수신
- **클라이언트 돌진 스킬 텔레포트 버그 수정**: 돌진 후 원래 위치로 순간이동하는 버그 해결
  - 로컬 dashState 우선 처리 (클라이언트 예측)

### V1.20.5
- **클라이언트 기본공격 색상 이펙트 수정**: 다른 영웅 전직 색상이 표시되지 않던 버그
- **클라이언트 이동 버벅임 수정**: 이동 중 위치 보정 제거로 부드러운 움직임
- **위치 전송 빈도 증가**: 200ms → 50ms (서버 브로드캐스트와 동일)

### V1.20.4
- **버프 duration 체크 누락 수정**: 만료된 버프가 효과를 적용하던 버그 수정
  - `swiftness` 이동속도 버프: 3개소 (heroUnit.ts, useRPGGameLoop.ts x2)
  - `berserker` 공격력/공격속도 버프: 4개소 (skillSystem.ts x2, useRPGGameLoop.ts x2, useRPGStore.ts)
  - `stun` 상태 체크: 1개소 (heroUnit.ts)
- **다른 플레이어 이동 예측 속도 버그 수정**: 보간 완료 후 60배 느리게 계산되던 문제
  - `updateOtherHeroesInterpolation`에서 `* 60` 승수 누락 수정
- **스턴 상태 이동 제한 수정**: 호스트 영웅이 스턴 중에도 이동할 수 있던 버그
- **스킬 사용 중복 검증 추가**: 시전/돌진/스턴 중 스킬 사용 방지
- **클라이언트 돌진 애니메이션 로컬 처리**: 서버 응답 대기 중에도 부드러운 돌진
- **위치 동기화 개선**: 오차 크기에 따른 단계별 보정 (80/150/250px 임계값)
- **부활 시 버프 초기화**: 사망 전 CC 상태가 부활 후에도 유지되던 문제 해결
- **무적/돌진 중 CC 면역**: 무적 버프나 돌진 중 스턴/넉백 적용 안 함

### V1.20.3
- **RPG 멀티플레이 클라이언트 스킬/공격 위치 버그 수정**

### V1.20.2
- **RPG 방 초대 버그 수정**: 친구 초대 수락 시 자동 방 참가
  - `GAME_INVITE_ACCEPTED` 메시지 처리를 전역 훅으로 이동
  - 어떤 화면에서 초대를 수락해도 자동으로 RPG 로비 이동 및 방 참가
  - 중복 핸들러 실행 방지 로직 추가 (`connectionState` 체크)
  - 호스트가 같은 방 초대를 받았을 때 무시하도록 개선
  - 다른 방에 있을 때 초대 수락 시 안내 메시지 표시
- **방 파기 시 초대 취소**: 방이 삭제될 때 관련 초대 자동 취소
  - 호스트가 방 파기 시 초대 취소
  - 대기방이 빈 상태로 삭제될 때 초대 취소
  - 10분 타임아웃으로 자동 파기 시 초대 취소
- **스킬 사용 후 위치 되돌아감 버그 수정**
  - 클릭 이동 중 스킬 사용 시 이동 목표가 유지되던 문제 해결
  - `startSkillCooldown()` 함수에서 `targetPosition` 초기화 추가
  - 모든 직업의 기본 공격 및 스킬에 적용

### V1.20.1
- **온라인 플레이어 게임 모드 표시**: 현재 이용 중인 모드 실시간 표시
  - 온라인 목록에서 RTS(청록색), RPG(보라색) 모드 표시
  - 게임 중인 경우 "게임중"(노란색) 표시 우선
  - 모드 변경 시 서버 로그 기록: `[Mode] 모드 변경: 닉네임 → RTS/RPG 모드`
- **RTS 모드 FriendSidebar 통합**: RPG 모드와 동일한 온라인 패널
  - ModeSelectScreen, DifficultySelectScreen, LobbyScreen에 적용
  - 친구 목록, 친구 요청, 온라인 플레이어 기능 사용 가능

### V1.20.0
- **RTS 모드 로그인 연동**: RTS와 RPG 플레이어 레벨 공유
  - RTS 모드도 로그인 필수 (계정/게스트)
  - AI 대전에서 플레이어 경험치 획득 (VIP 2배)
  - 1vs1 대전에서 로그인 닉네임 자동 사용
- **RTS 모드 프로필/온라인 표시**: RPG 모드와 동일한 UI 통합
  - 프로필 버튼: RPG와 동일한 위치/크기 (좌측 상단)
  - 온라인 상태 바: 우측 상단 (온라인 수, 게임 중, 대기방)
  - RTS 프로필 화면: 플레이어 레벨 정보만 표시
- **RTS 전투 BGM**: 전략적이고 긴장감 있는 마칭 스타일 BGM
- **RTS 모드 유닛 카운트 표시**: 각 유닛 버튼에 보유 유닛 수 뱃지 표시
- **RTS 모드 버튼 효과음**: 모든 버튼에 클릭 효과음 적용
- **일시정지 화면 개선**: "메인 메뉴" → "로비로 돌아가기" 버튼
  - AI 대전: 난이도 선택 화면으로 이동
  - 튜토리얼: RTS 모드 선택 화면으로 이동
- **RTS 멀티플레이어 버그 수정**: 효과음 중복, WebSocket 연결 상태 처리

### V1.19.4
- **극한 난이도 랭킹 시스템**: 클리어 기록 저장 및 조회
  - 1인/2인/3인/4인 플레이어 수별 별도 랭킹
  - 로비 화면에 🏆 랭킹 버튼 추가
  - 극한 난이도 승리 시 자동 저장
- **온라인 플레이어 목록 실시간 동기화**: 접속/해제 즉시 반영
  - 새 메시지: `ONLINE_PLAYER_JOINED`, `ONLINE_PLAYER_LEFT`
  - 5초 폴링은 안전망으로 유지

### V1.19.3
- **대기방 채팅 기능 추가**: 협동 모드 대기방에서 실시간 채팅 가능
  - 새 플레이어 입장 시 채팅 히스토리 자동 제공 (최대 50개)
  - 메시지 길이 제한 (200자), 스팸 방지 (500ms 간격)
- **VIP 경험치 보너스 상향**: 1.5배 → 2배로 변경
- **대기방 자동 파기**: 10분간 게임 시작 없으면 방 자동 파기

### V1.19.2
- **VIP 시스템 추가**: 플레이어에게 VIP 역할 부여 기능
  - VIP 플레이어는 게임 종료 시 경험치 2배 획득
  - 플레이어 경험치, 직업(클래스) 경험치 모두 2배 적용
  - 싱글플레이, 협동 모드 모두 적용
  - 프로필 화면에서 닉네임 옆에 VIP 뱃지 표시
  - 게임 결과 화면에서 VIP 보너스 적용 내역 표시 (기본 경험치, 보너스량)
  - 관리자 대시보드에서 VIP 역할 부여/취소 가능 (Super Admin 전용)
  - DB 마이그레이션 필요: `supabase/migrations/009_add_player_role.sql`

### V1.19.1
- **멀티플레이어 및 친구 시스템 버그 수정**

### V1.19.0
- **직업 도감 기능 추가**: RPG 로비에서 모든 직업 정보 확인
  - 📚 직업 도감 버튼으로 접근
  - 기본 직업/전직 직업 탭 분리
  - 직업별 스탯, 스킬, 패시브, 전직 경로 확인
  - 플레이어 레벨에 따른 잠금/해금 상태 표시
- **저격수 크리티컬 확률 구현**: 기본 공격에 50% 확률로 크리티컬 발동
  - 크리티컬 시 데미지 2배
  - 크리티컬 데미지는 금색으로 표시
- **버서커 피해흡혈 배율 조정**: 2배 → 1.5배로 변경
- **RPG 튜토리얼 모드 추가**: 처음 플레이하는 유저를 위한 8단계 튜토리얼
  - 이동, 자동공격, 스킬(Shift/R), 업그레이드, 기지 파괴, 보스 처치
  - 튜토리얼 전용 맵 및 설정 (작은 맵, 약한 적, 기지 1개)
  - ESC 일시정지 메뉴 (계속/다시하기/설정/나가기)
- **중복 로그인 방지 강화**: 클라이언트 측 강제 로그아웃 처리
  - `DUPLICATE_LOGIN` 수신 시 즉시 Supabase 로그아웃
  - 자동으로 로그인 화면 리다이렉트
- **부활 시 카메라 추적**: 부활 후 자동으로 영웅 따라가기
- **기사 스킬 밸런스 수정**
  - 방패 돌진(W) 쿨타임 6초 → 8초
  - 방패 돌진 설명에 '기본공격 적중 시 쿨타임 1초 감소' 추가
- **버그 수정**
  - 신규 유저 로그인 시 온라인 현황이 보이지 않던 버그 수정
  - 방에서 플레이어가 나간 후에도 목록에 남아있던 버그 수정
  - 관리자 대시보드에서 로그아웃 시 알림이 오지 않던 버그 수정

### V1.18.3
- **온라인 상태 알림 버그 수정**
  - 연결 종료 시 친구들에게 오프라인 알림이 전달되지 않던 버그 수정
  - `registerUserOffline()` 함수를 통해 콜백 정상 호출
- **중복 로그인 정책 변경**
  - 기존: 새 로그인이 기존 연결 종료
  - 변경: 이미 활성 세션이 있으면 새 로그인 시도 거부
  - 기존 세션이 비활성 상태인 경우에만 새 로그인 허용
- **중복 로그인 시 방 처리 추가**
  - 비활성 세션 정리 시 해당 플레이어의 방 참여 상태도 정리
  - 게임 방 및 대기 방에서 플레이어 자동 제거

### V1.18.2
- **중복 로그인 방지 개선**: `DUPLICATE_LOGIN` 메시지 타입 추가, 자동 재연결 차단
- **싱글플레이 사망 버그 수정**: 캐릭터 사망 시 게임 종료 → 넥서스 파괴 시에만 종료
- **호스트/클라이언트 사망 알림 버그 수정**: 중복 알림 방지 및 누락 수정
- **친구 초대 시 로비 튕김 수정**: 호스트가 초대 수락 메시지 받으면 무시
- **SP 공격속도 업그레이드 적용**: Q스킬 쿨다운 감소에 SP 보너스 적용
- **방 목록 실시간 업데이트**: Push 방식으로 즉시 업데이트
- **온라인 플레이어 목록 개선**: 본인 표시 및 최상단 정렬

### V1.18.1
- **멀티플레이어 타겟팅 버그 수정**
  - 호스트가 사망 시 적이 클라이언트 캐릭터를 무시하고 넥서스만 공격하던 버그 수정
  - 원인: `allHeroes.length > 1` 조건으로 호스트 사망 시 싱글플레이어 AI로 폴백
  - 해결: `allHeroes.length >= 1`로 변경하여 살아있는 플레이어가 있으면 멀티플레이어 AI 사용
- **중복 로그인 처리 개선**
  - 같은 계정으로 재연결 시 기존 WebSocket 연결 자동 종료
  - 온라인 플레이어 카운트 정확성 개선
  - 기존 연결에 `DUPLICATE_LOGIN` 메시지 전송 후 종료
- **친구 사이드바 UI 개선**
  - 기존 모달 형태(FriendPanel) → 항상 표시되는 사이드바(FriendSidebar)로 변경
  - RPG 게임 로비 화면 오른쪽에 고정 배치
  - 온라인/친구/요청 탭으로 구분
  - 헤더 텍스트가 현재 선택된 탭에 따라 동적 변경
  - 왼쪽 중앙 버튼으로 사이드바 접기/펼치기 기능

### V1.18.0
- **친구 시스템 추가** ([상세 문서](docs/FRIENDS.md))
  - 친구 목록 관리 (추가/삭제/온라인 상태 확인)
  - 온라인 플레이어 목록 조회
  - 친구 요청 시스템 (보내기/수락/거절/취소)
  - 게임 초대 기능 (5분 TTL)
  - 비밀방 초대 입장 (코드 없이 초대로 입장)
  - 서버 상태 표시 (온라인 플레이어, 활성 게임, 대기방)
  - 친구 패널 UI (친구/온라인/요청 탭)
  - 실시간 알림 (친구 요청, 게임 초대)
- **데이터베이스**
  - `friends` 테이블: 친구 관계 (양방향)
  - `friend_requests` 테이블: 친구 요청
  - RLS 정책 적용

### V1.17.20
- **멀티플레이어 클라이언트 데미지 숫자 중복 버그 수정**
  - 클라이언트에서 데미지 숫자가 중복으로 나타나던 문제 해결
  - 원인: 클라이언트 로컬 타이머와 호스트 상태 동기화 타이밍 불일치
  - 해결: 클라이언트는 로컬에서 데미지 숫자를 제거하지 않고 호스트 동기화에만 의존
  - `RPGDamageNumbers.tsx`에서 `isMultiplayerClient` 조건부 처리 추가

### V1.17.19
- **다크나이트 E 스킬 (어둠의 칼날) 데미지 상향**
  - 초당 공격력의 50% → 75%로 변경
- **가디언 W 스킬 (수호의 돌진) 아군 보호막 공유**
  - 주변 200 범위 아군에게 최대 HP 20% 보호막 3초간 부여
  - 싱글플레이/멀티플레이 호스트/클라이언트 모두 동작
- **가디언 스킬 사용 시 부활 버그 수정**
  - 가디언 보호막(damageReduction=0.2)이 기사 철벽(damageReduction=0.7)과 동일하게 HP 회복이 적용되던 버그
  - 가디언 보호막은 HP 회복 없이 보호막만 부여하도록 수정
  - `shareBuffToAllies`, `shareHostBuffToAllies`, 오라 시스템에서 가디언 보호막 제외
- **멀티플레이어 아군 힐 사망 체크 추가**
  - `executeOtherHeroSkill`에서 사망한 영웅에게 힐 적용 시 부활하던 버그 수정
- **캐릭터 정보 UI 스킬 키 표시 수정**
  - W/E → Shift/R로 변경 (실제 조작 키와 일치)
- **클라이언트 스킬/업그레이드 시 위치 버그 수정**
  - 스킬 사용 시 호스트 화면에서 캐릭터가 멈춰 보이던 문제
  - 클라이언트에서 스킬/업그레이드 후 과거 위치로 되돌아가던 문제
  - `PlayerInput.moveDirection`을 optional로 변경하여 이동 상태 유지
- **HP 재생 시 피격 이펙트 버그 수정**
  - 기사 패시브 HP 재생 중 붉은색 피격 이펙트가 발생하던 문제
  - 최소 5 HP 이상 감소 시에만 피격으로 판정
- **힐러 오로라 힐 이펙트 추가**
  - 힐러 패시브 오로라가 아군을 치유할 때 초록색 회복 숫자 표시
  - 누적 10 HP 이상 회복 시 한 번에 표시하여 화면 혼잡 방지

### V1.17.18
- **멀티플레이어 보스 스킬 버그 대폭 수정**
  - 보스 스킬 데미지가 가끔 적용되지 않던 문제 수정
    - 버프 duration 체크 추가 (만료된 무적/철벽 버프가 데미지 차단하던 버그)
    - 여러 보스가 같은 틱에 데미지 처리 시 stale 상태 참조 버그 수정
  - 보스 스킬 이펙트/사운드 클라이언트 동기화 수정
    - `bossSkillExecutedEffects` 동기화 배열 추가
    - 호스트에서 스킬 실행 시 이펙트 정보를 명시적으로 클라이언트에 전송
    - 기존 95% 진행도 감지 방식의 타이밍 문제 해결
  - 스턴 시 시전 취소 동기화 (`castingUntil` 동기화 추가)
- **멀티플레이어 업그레이드 계산 버그 수정**
  - 다른 플레이어 영웅의 기본 스탯 직렬화 추가 (`baseAttack`, `baseSpeed`, `baseAttackSpeed`)
  - 업그레이드가 복리로 적용되던 문제 수정

### V1.17.17
- **궁수 타겟팅 로직 수정**
  - 적과 기지를 하나의 타겟 풀로 통합하여 `multiTargetCount` 내에서 처리
  - 패시브 없음 (레벨 5 미만): 적 또는 기지 중 가까운 1개만 공격
  - 패시브 있음 (레벨 5 이상): 확률적으로 최대 3개 타겟 (적 + 기지 합산)
  - 기존 버그: 패시브 없이도 적 + 기지 동시 공격 가능했던 문제 수정

### V1.17.16
- **클라이언트 캐릭터 움직임 대폭 개선**
  - 선형 보간(lerp) → ease-out cubic 이징 함수 적용
  - 보간 시간 50ms → 80ms 증가 (네트워크 지터 흡수)
  - `HeroInterpolation` 타입 확장: `velocityX/Y`, `moveDirectionX/Y`, `moveSpeed` 필드 추가
  - 클라이언트 측 이동 시뮬레이션: 보간 완료 후 이동 방향으로 예측 이동
  - 맵 경계 제한 적용
  - 60fps에서 부드러운 캐릭터 움직임 제공

### V1.17.15
- **데미지 숫자 시스템 개선**
  - 넥서스 레이저 공격 데미지 숫자 제거 (시각적 복잡도 감소)
  - 캐릭터 기본 공격으로 적 공격 시 데미지 숫자 표시
  - 캐릭터 스킬로 적 기지 공격 시 데미지 숫자 표시
  - 모든 공격(기본 공격/스킬/궁극기)에서 기지 데미지 숫자 표시
- **부활 시 자동 카메라 고정**
  - 호스트/클라이언트 모두 부활 후 자동으로 카메라가 영웅 위치로 이동
  - Space bar를 눌러 화면을 맞출 필요 없음

### V1.17.14
- **클라이언트 동기화 버그 대폭 수정**
  - 인게임 업그레이드 후 위치 리셋 버그 수정 (업그레이드 요청에 위치 정보 포함)
  - 넥서스 레이저 공격 이펙트/사운드 중복 버그 수정
  - 적 기본 공격 이펙트 클라이언트 동기화
  - 보스 스킬 데미지 숫자 클라이언트 동기화
  - 모든 직업 W/E 스킬 클라이언트 측 실행 처리 (`handleClientSkillExecution`)
- **버그 수정**
  - `otherHeroes` Map 크기 체크 오류 수정 (`Object.keys()` → `Map.size`)
  - `processedEffectIdsRef` 메모리 누수 수정 (`Set` → `Map` with timestamp cleanup)

### V1.17.13
- **플로팅 데미지 숫자 시스템 추가**
  - 데미지가 숫자로 위로 떠오르며 페이드아웃
  - 일반 데미지: 흰색
  - 크리티컬 데미지: 금색, 더 큰 크기
  - 힐: 초록색 (+숫자)
- **피격 화면 효과 추가**
  - 비네팅 효과: HP가 낮을수록 화면 가장자리 빨갛게
  - 캐릭터 깜빡임: 피격 시 0.2초간 빨간색 깜빡임
  - 데미지 플래시: 피격 시 0.15초 화면 빨간 플래시
- **위험 경고 효과 추가**
  - HP 30% 이하 시 화면 가장자리 붉은 펄스 (심장박동 효과)

### V1.17.12
- **가디언/팔라딘 W 스킬 쿨타임 감소**
  - 기본공격 적중 시 W 스킬 쿨타임 1초 감소 (기사와 동일)
- **가디언/팔라딘 궁극기 멀티플레이 버그 수정**
  - 아군에게 버프/힐이 적용되지 않던 문제 해결
- **저격수 궁극기 이펙트 추적**
  - 타겟 이펙트가 적의 이동을 실시간 추적
- **팔라딘 특수 효과 구현**
  - 기본공격 시 주변 200px 내 아군에게 공격력 5% 힐 (본인 제외)
- **힐러 오로라 이펙트 구현**
  - 힐러 주변 150px 오로라 범위 내 아군 초당 최대HP 2% 회복 (본인 포함)
  - 녹색 오로라 시각 이펙트 추가
- **전직별 기본 공격 이펙트 색상 차별화**
  - 버서커: 붉은색, 가디언: 파란색, 저격수: 보라색, 레인저: 초록색
  - 팔라딘: 금색, 다크나이트: 어두운 보라색, 대마법사: 빨간색, 힐러: 민트색
- **2차 강화 레벨 하향** (레벨 50 → 40)
- **캐릭터 정보 UI 개선** (전직 특수 효과를 패시브와 함께 표시)

### V1.17.11
- **멀티플레이어 전직 캐릭터 부활 동기화 수정**
  - 클라이언트에서 전직된 캐릭터 부활 시 `advancedClass`, `tier` 동기화 추가
  - `config` 전체 스탯(name, attack, speed 등) 동기화 추가
  - `baseAttack`, `baseSpeed` 동기화 추가
- **보스 회복 스킬 알림 추가**
  - 호스트: `"⚠️ 보스가 회복합니다! (+N%)"` 알림 표시
  - 클라이언트: `"⚠️ 보스가 회복합니다!"` 알림 표시
- **보스 돌진 이동 자연스럽게 개선**
  - `RPGEnemy`에 `dashState` 필드 추가
  - 돌진 스킬 실행 시 0.3초 동안 부드럽게 이동
  - 게임 루프에서 보스 위치를 점진적으로 보간 처리
- **멀티플레이어 보스 돌진 동기화 수정**
  - `SerializedEnemy`에 `dashState` 필드 추가
  - 적 직렬화/역직렬화에 `dashState` 포함
  - 클라이언트에서도 보스가 자연스럽게 이동
- **난이도 조절 (어려움/극한 상향)**
  - 어려움: 적 HP 2.5x, 공격 2.0x, 기지 HP 2.5x, 스폰 수 1.8x (추천 레벨: 25+)
  - 극한: 적 HP 3.5x, 공격 2.8x, 기지 HP 3.5x, 스폰 수 2.5x (추천 레벨: 40+)
  - 난이도 설명에 추천 레벨 표시 추가

### V1.17.10
- **멀티플레이어 틱 스킬 동기화 버그 수정**
  - `dark_blade` (다크나이트 E): effectManager → addSkillEffect 변경
  - `spring_of_life` (힐러 E): effectManager → addSkillEffect 변경
  - 호스트에서만 보이던 틱 이펙트가 클라이언트에도 동기화됨
- **클라이언트 pendingSkill 이펙트 처리 개선**
  - `inferno_burn` 케이스 추가 (대마법사 W 화상 효과)
  - `meteor_shower` duration 0.5초 → 2.0초로 수정
  - `dark_blade`, `spring_of_life` addSkillEffect 사용으로 통일

### V1.17.9
- **대마법사 W 스킬 (인페르노) 화상 효과 추가**
  - 스킬 사용 시 2초간 지속되는 화상 지역 생성
  - 화상 지역 내 적과 기지에 초당 20% 추가 데미지
  - `inferno_burn` 시각 효과 추가 (불타는 바닥 + 불꽃 파티클)
  - pendingSkill 시스템을 통한 틱 데미지 구현
- **대마법사 E 스킬 (메테오 샤워) 이펙트 개선**
  - 운석들이 순차적으로 위에서 아래로 떨어지는 모션으로 변경
  - 랜덤 위치 제거 → 고정된 위치에 운석 배치
  - 운석 본체: 타원형 + 글로우 효과 + 밝은 중심
  - 운석 꼬리: 위로 길게 그라디언트 표현
  - 충돌 시 폭발 효과 (흰색→노란색→주황색)
  - 경고 범위 점선 원 표시
  - 이펙트 지속시간 0.5초 → 2.0초로 증가
- **pendingSkill casterId 버그 수정**
  - 모든 pendingSkill 객체에서 `casterId` → `casterId || hero.id`로 변경
  - 영향받는 스킬: 마법사 E, 저격수 E, 다크나이트 E, 힐러 E, 대마법사 W/E
- **executeAdvancedWSkill 함수 수정**
  - `pendingSkill` 변수 선언 추가
  - return 문에 `pendingSkill` 반환 추가

### V1.17.8
- **저격수 W 스킬 이동속도 버프 수정**
  - 공격속도가 아닌 이동속도 30% 증가로 변경
  - 신규 `swiftness` 버프 타입 추가 (types/rpg.ts)
  - `moveSpeedBonus` 필드 추가 (Buff 인터페이스)
  - heroUnit.ts에서 이동속도 버프 적용 로직 추가
  - RPGHeroPanel.tsx에 신속 버프 아이콘(💨) 표시 추가
- **전직 변경 시 SP/스탯 초기화**
  - 전직 변경 시 레벨 15, SP 14로 초기화
  - 전직 변경 시 스탯 업그레이드 리셋 (모두 0)
  - UI 경고 메시지 업데이트 (CharacterUpgradeModal.tsx)
- **방 설정 UI 버그 수정**
  - 프로필 화면에서 방으로 돌아올 때 설정(공개/비밀, 난이도)이 기본값으로 초기화되던 버그 수정
  - 서버 COOP_ROOM_CREATED 응답에 `isPrivate`, `difficulty` 필드 추가
  - 클라이언트에서 방 설정을 multiplayer 스토어에 저장하여 화면 전환 시에도 유지
- **AdvancedSkillConfig 타입 개선**
  - `range` 속성 추가 (저격수 E 스킬 사거리 설정용)

### V1.17.7
- **사망한 캐릭터 관련 버그 대폭 수정**
  - 사망한 영웅에게 힐/버프 적용되지 않도록 수정 (skillSystem.ts, useRPGGameLoop.ts)
  - 사망한 영웅이 스킬 사용/요청 불가하도록 수정 (handleSkillExecution, requestSkill)
  - 보스 스킬이 사망한 영웅에게 데미지/스턴/넉백 적용 안 함
  - 적이 사망한 영웅에게 데미지 적용 안 함 (멀티플레이어)
  - 사망한 영웅이 업그레이드 불가 (키보드 단축키 + 원격 입력)
  - 사망한 영웅이 이동 불가 (멀티플레이어 원격 입력)
  - 다른 플레이어 영웅 스킬 실행 시 사망 체크 추가 (executeOtherHeroSkill)
- **부활 시 상태 초기화 수정**
  - 다른 플레이어 부활 시 `castingUntil`, `dashState` 초기화 추가
- **힐/버프 적용 대상 필터링**
  - 팔라딘 W 스킬: 사망한 아군 힐 제외
  - 힐러 W 스킬: 사망한 아군 힐 제외
  - 힐러 E 스킬: 사망한 아군 힐/무적 제외
  - 가디언 E 스킬: 사망한 아군 철벽 버프 제외

### V1.17.6
- **스나이퍼 E 스킬 (저격) 개선**
  - 타겟이 없으면 스킬 사용 불가 및 쿨타임 시작 안 함
  - 마우스 방향 30도 내 적이 있을 때만 스킬 발동
- **스킬 결과 처리 개선**
  - `allyHeals`, `allyBuffs` 호스트에서 제대로 처리되도록 수정
  - W/E 스킬 실행 시 `allies` 배열 전달 누락 수정
- **사운드 중복 재생 수정**
  - `meteor_shower`, `spring_of_life` 등 틱 스킬 사운드 개별 처리
- **사망/부활 시 상태 초기화**
  - 사망 시 `castingUntil`, `dashState` 초기화
  - 부활 시 `castingUntil`, `dashState` 초기화

### V1.17.5
- **전직 스킬 실행 버그 수정**
  - 전직 캐릭터 스킬이 쿨타임만 돌고 실행되지 않던 치명적 버그 수정
  - `handleSkillExecution`에서 기본 직업 스킬 타입과 비교하던 로직을 영웅의 실제 스킬 타입으로 변경
- **전직 스킬 UI 완성**
  - 전직 스킬 설명 표시 (`getSkillDescription`에서 ADVANCED_W_SKILLS, ADVANCED_E_SKILLS 검색 추가)
  - 전직 스킬 아이콘 16종 추가 (W: 🩸😡🔙🎯✝️🗡️🔥💚 / E: 😡🛡️🎯🌪️☀️⚫☄️💧)
  - 전직 스킬 사거리 표시 지원 (`getSkillRangeInfo` 업데이트)

### V1.17.4
- **전직 시스템 멀티플레이 동기화 완성**
  - SerializedHero에 advancedClass, tier 필드 추가
  - 멀티플레이 방 생성/참가/직업 변경 시 전직 정보 동기화
  - 싱글플레이 게임 시작/재시작 시 전직 정보 로드
  - 클라이언트 스킬 실행 시 전직 스킬 정확히 실행
  - 아군 힐/버프 효과 멀티플레이 동기화
- **서버 API 전직 정보 지원**
  - 프로필 API에서 advancedClass, tier 저장/로드
  - DB 마이그레이션 스크립트 추가 (006_add_job_advancement.sql)
- **빌드 오류 수정**
  - AdvancedSkillConfig의 type을 string에서 SkillType으로 변경
  - 사용되지 않는 파라미터 처리

### V1.17.3
- **전직 시스템 완성 (싱글플레이)**
  - 레벨 15 도달 시 전직 가능
  - 레벨 50 도달 시 자동 2차 강화 (전직한 캐릭터만)
  - 8개 전직 직업 추가 (버서커, 가디언, 저격수, 레인저, 팔라딘, 다크나이트, 대마법사, 힐러)
  - 전직 직업별 고유 W/E 스킬 구현
  - 전직 시 스탯, SP 업그레이드, 레벨, 경험치 유지
- **스탯 계산 시스템**
  - 1차 전직: 전직 직업 절대 스탯 (기본 직업보다 모두 높음)
  - 2차 강화: 전직 기본 스탯 × 1.2

### V1.17.2
- **멀티플레이 버그 수정**
  - 게임 시작 후 플레이어 정보 동기화 오류 수정

### V1.17.1
- **경험치 시스템 대폭 개선**
  - 난이도별 처치 경험치 배율 적용 (쉬움 1.0x ~ 극한 2.0x)
  - 승리 보너스 난이도별 차등화 (쉬움 50 ~ 극한 500)
  - 패배 시 획득 경험치 50% 감소 페널티
- **직업 경험치 상향**
  - 기지 파괴: 15 → 25점
  - 보스 처치: 25 → 40점
  - 적 처치: 1 → 1.5점
  - 직업 승리 보너스 추가 (쉬움 40 ~ 극한 400)
- **미사용 코드 제거**
  - `DEAD_PLAYER_RATIO` 상수 제거

### V1.17.0
- **보스 스킬 멀티플레이어 동기화**
  - 보스 스킬 경고(bossSkillWarnings) 호스트→클라이언트 동기화
  - 클라이언트에서 경고 렌더링 및 이펙트/사운드 재생 지원
  - 모든 6종 스킬 (강타, 소환, 충격파, 밀어내기, 돌진, 회복) 완전 동기화
- **보스 스킬 경고 렌더링 추가**
  - 밀어내기: 노란색 원형 + 방사형 화살표
  - 돌진: 파란색 직선 경로 + 목표 지점 표시
  - 회복: 녹색 원형 + 십자가 패턴 + 상승하는 + 파티클
- **보스 스킬 이펙트/사운드**
  - 클라이언트가 경고 95% 진행 시 이펙트와 사운드 자동 재생
  - 호스트와 동일한 시각/청각 피드백 보장
- **버그 수정**
  - heal 스킬 경고 렌더링 안 되던 문제 수정 (radius 0 → 기본값 80)
  - UnitState 타입에 'casting' 추가

### V1.16.7
- **RPG 모드 BGM 시스템 추가**
  - 전투 BGM: 앰비언트 드론 + 아르페지오 멜로디
  - 보스 BGM: 긴장감 있는 펄스 비트
  - 게임 시작 시 자동 재생, 보스 페이즈 전환 시 변경
- **넥서스 레이저 방어 시스템**
  - 넥서스가 범위 내 모든 적에게 약한 레이저 공격
  - 시각 효과: 빔 + 스파크 파티클
- **사망 버그 수정**
  - 영웅 사망 후 죽은 마커가 움직이던 버그 수정
  - 사망 시 이동/공격 즉시 중단
- **사운드 설정 저장 기능**
  - 로그인 사용자: DB에 설정 저장
  - 게스트: localStorage에 저장 (로그아웃 시 초기화)
  - BGM 볼륨이 마스터 볼륨과 동기화

### V1.16.6
- **RPG 적 밸런스 조정**
  - RPG 전용 적 스탯 분리 (`RPG_ENEMY_CONFIGS`)
  - 궁수: HP 50→70, ATK 20→18
  - 기사: HP 300→280, ATK 12→18
  - 마법사: HP 40→55, ATK 35→30
- **난이도별 경험치 배율**
  - 쉬움: 1.0x, 중간: 1.2x, 어려움: 1.5x, 극한: 2.0x
  - 플레이어 EXP, 클래스 EXP 모두 적용
- **난이도별 스폰 수 배율**
  - 쉬움: 1.0x, 중간: 1.2x, 어려움: 1.5x, 극한: 2.0x
  - 기존 시간 기반 스폰 수에 배율 적용
- **멀티플레이어 인원수 스케일링**
  - 적 HP에 플레이어 수 배율 적용
  - 1인: 1.0x, 2인: 1.5x, 3인: 2.0x, 4인: 2.5x
- **멀티플레이어 난이도 동기화 강화**
  - 게임 시작 시 서버에서 난이도 명시적 전달
  - 호스트/클라이언트 모두 동일 난이도 보장

### V1.16.5
- **개인 처치 수 시스템 (멀티플레이어)**
  - 적 처치 수가 개별 플레이어별로 추적됨
  - 혼자 처치: 해당 플레이어만 +1
  - 공동 처치 (여러 명이 공격): 관여한 모든 플레이어 +1
  - 게임 결과 화면에서 개인 처치/팀 처치 구분 표시
  - 경험치 계산 시 개인 처치 수 기준으로 적용
- **다른 플레이어 영웅 보간 개선 (클라이언트)**
  - 호스트가 아닌 클라이언트에서 다른 플레이어의 움직임이 부드럽게 표시
  - 위치 보간(lerp) 적용으로 계단 현상 해결
  - 매 프레임 보간 업데이트 처리

### V1.16.4
- **게임 종료 후 로비 복귀 시 방 설정 유지**
  - 게임 방(`RPGCoopGameRoom`)에 `isPrivate`, `difficulty` 저장
  - `COOP_RETURN_TO_LOBBY` 메시지에 방 설정 포함
  - 로비 복귀 시 난이도/비밀방 설정이 UI에 즉시 반영
- **게임 재시작 시 동일 난이도 적용**
  - 멀티플레이어 상태에 `roomIsPrivate`, `roomDifficulty` 필드 추가
  - 로비에서 스토어의 설정을 읽어 로컬 상태 동기화

### V1.16.3
- **비밀방 참가 로직 개선**
  - 공개방에서 비밀방으로 변경 시 서버 측 검증 추가
  - 비밀방 클릭 시 코드 입력 후 코드 기반 참가로 변경
- **방 설정 동기화 개선**
  - 방 참가 시 현재 방 설정(비밀방 여부, 난이도) 즉시 수신
  - `COOP_ROOM_JOINED` 메시지에 `isPrivate`, `difficulty` 필드 추가

### V1.16.2
- **RPG 난이도 시스템 추가**
  - 4가지 난이도: 쉬움, 중간, 어려움, 극한
  - 난이도별 배율 적용: 적 HP, 공격력, 스폰 간격, 골드 보상, 보스 스탯
  - 적 기지 HP도 난이도에 따라 스케일링
- **방 생성 시 난이도 선택**
  - 방 생성 모달에서 방 유형(공개/비밀)과 난이도 동시 선택
  - 방 목록에서 각 방의 난이도를 색상별 배지로 표시
- **로비 내 방 설정 변경**
  - 호스트가 로비에서 방 유형과 난이도를 실시간 변경 가능
  - 변경 시 서버 로그 출력 및 모든 플레이어에게 동기화
- **버그 수정**
  - 호스트가 방 생성 후 직업 변경이 안 되던 문제 수정

### V1.16.1
- **적 AI 탐지 범위 조정**
  - 모든 적 유닛 탐지 범위 100 감소
- **게임 결과 UI 수정**

### V1.16.0
- **적 AI 로직 재작성**
- **클래스 밸런스 조정**
- **로그인 세션 개선**

### V1.15.27
- **멀티플레이어 기지 확장 시스템**
  - 플레이어 수에 따라 적 기지 수 증가
  - 1~2인: 좌, 우 (2개 기지)
  - 3인: 좌, 우, 상 (3개 기지)
  - 4인: 좌, 우, 상, 하 (4개 기지)
  - `EnemyBaseId` 타입 확장: `'left' | 'right' | 'top' | 'bottom'`
- **멀티플레이어 호스트 위임 시스템**
  - 대기방에서 호스트가 나가면 다른 플레이어에게 호스트 위임
  - 게임 종료 후 로비 복귀 상태에서도 호스트 위임 지원
  - 게임 중에만 호스트 퇴장 시 방 파기
  - `transferHostAndLeave()`: 호스트 위임 및 퇴장 처리 함수 추가
  - `isInLobby()`: 로비 상태 확인 함수 추가
- **호스트 위임 후 UI 자동 갱신**
  - 새 호스트에게 "게임 시작" 버튼 표시
  - `COOP_ROOM_JOINED` 메시지에서 호스트 여부 자동 감지

### V1.15.26
- **싱글플레이 사망 시 게임 멈춤 버그 수정**
  - 영웅 사망 시 게임 로직이 중단되던 문제 해결
  - 사망해도 적 AI, 넥서스 데미지 등 게임 계속 진행
  - 부활 후 정상적으로 전투 재개
- **SP 공격속도 업그레이드 소수점 표시 수정**
  - 부동소수점 오류로 긴 소수점이 표시되던 문제 해결 (0.35000000000000003 → 0.35)
  - `attackSpeed` 스탯에 `toFixed(2)` 포맷팅 적용
- **인게임 업그레이드 비용 체계 변경**
  - 기존: 지수 증가 (50 × 1.5^레벨) - 50, 75, 112, 168...
  - 변경: 선형 비례 증가 (50 × (레벨+1)) - 50, 100, 150, 200...
  - 1레벨은 50골드 고정, 이후 레벨에 비례하여 증가

### V1.15.25
- **멀티플레이어 방 나가기 버그 수정**
  - 게임 중단 후 클라이언트가 "방 나가기"를 눌러도 실제로 방에서 나가지 않던 문제 해결
  - 게임 방(coopGameRooms)에서도 플레이어 제거 처리 추가
- **멀티플레이어 방 목록 유지 기능**
  - 게임 시작 후에도 방이 로비 목록에 유지됨
  - 게임 중인 방은 "게임 중" 표시와 함께 입장 불가
  - 로비 복귀 시 방 상태가 자동으로 "대기 중"으로 변경되어 다시 입장 가능
- **대기 방/게임 방 상태 동기화**
  - `setWaitingRoomState()`: 대기 방 상태 업데이트 함수 추가
  - `syncWaitingRoomPlayers()`: 플레이어 목록 동기화 함수 추가
  - 게임 종료/플레이어 퇴장 시 대기 방 정보 자동 동기화

### V1.15.24
- **멀티플레이어 일시정지 시스템 추가**
  - 호스트가 ESC 누르면 모든 클라이언트도 일시정지 화면 표시
  - 호스트의 결정(계속/게임 중단)에 따라 모든 플레이어 동작
  - 클라이언트는 ESC를 눌러도 게임이 멈추지 않음 (소리 설정만 가능)
  - 소리 설정은 개별 설정 (전체 동기화 제외)
- **멀티플레이어 게임 중단 기능**
  - 호스트 일시정지 메뉴에서 "게임 중단" 버튼
  - 게임 중단 시 모든 플레이어에게 게임 오버 적용
- **멀티플레이어 게임 재시작 버그 수정**
  - 재시작 후 클라이언트가 캐릭터만 보이고 각자 동작하던 문제 해결
  - isMultiplayer 상태 및 roomCode/roomId 유지하도록 수정
- **게임 재시작 후 로비에서 직업 변경/시작 버그 수정**
  - 게임 종료 후 로비 복귀 시 직업 변경이 안되던 문제 해결
  - RPGCoopGameRoom에 changePlayerClass 메서드 추가
  - coopGameRooms에서도 직업 변경/게임 시작 처리
- **로그인/로그아웃 서버 로그 기능**
  - 로그인 시 서버에 `[Auth] 로그인: 닉네임 (Lv.X) [일반/게스트]` 로그
  - 로그아웃 시 서버에 `[Auth] 로그아웃: 닉네임` 로그
  - 로그인 시 WebSocket 자동 연결하여 알림 전송

### V1.15.23
- **RPG 대기방 프로필 버튼 추가**
  - 왼쪽 상단에 프로필 버튼 표시
  - 닉네임, 레벨, 경험치 바 표시
  - 클릭 시 프로필 화면으로 이동
- **대기방 플레이어 목록에 직업 레벨 표시**
  - 각 플레이어의 선택한 직업 레벨 표시
  - 직업 변경 시 레벨 실시간 동기화
- **로그인 에러 메시지 한글화**
  - 'Invalid login credentials' → '계정을 다시 확인해주세요.'
- **게임 종료 후 나가기 버튼 개선**
  - '방 파기' → '나가기'로 텍스트 변경
  - 나가기 클릭 시 대기방으로 이동

### V1.15.22
- **멀티플레이어 기본 공격 AoE 버그 수정**
  - 클라이언트 전사/기사/마법사 기본 공격이 단일 타겟으로 적용되던 문제 해결
  - 호스트와 동일하게 범위 공격 적용
- **멀티플레이어 AoE 공격 시 적 기지 데미지 적용**
  - 범위 공격 시 적과 기지가 함께 있을 때 기지에도 데미지 적용
- **광전사 버프 피해흡혈 모든 클래스 적용**
  - 광전사 버프를 공유받은 모든 클래스에 피해흡혈 효과 적용
  - 기존: 전사 클래스만 피해흡혈 적용
- **클라이언트 이동 러버밴딩 수정**
  - 클라이언트 캐릭터가 이동 중 반대 방향으로 당겨지던 현상 수정
  - 이동 중에는 로컬 위치 우선, 정지 시에만 서버 위치 보정

### V1.15.13
- **멀티플레이어 적 AI 타겟팅 버그 수정**
  - 사망한 호스트 영웅이 적 AI의 타겟 목록에서 제외되지 않던 문제 해결
  - `allHeroes` 배열에 살아있는 영웅만 포함하도록 수정

### V1.15.12
- **같은 타입 버프 지속시간 처리 개선**
  - 여러 플레이어가 같은 버프를 시전할 때 더 긴 지속시간 유지
  - `addBuff()` 함수에서 기존 버프와 새 버프의 지속시간 비교 후 긴 것 선택

### V1.15.11
- **멀티플레이어 맵 경계 일관성 수정**
  - 다른 플레이어 영웅 이동 시 30px 마진 적용 (호스트와 동일)
- **버프 공유 로직 개선**
  - 여러 플레이어가 같은 타입 버프 시전 시 다른 시전자 버프 유지
  - casterId 기반 버프 필터링으로 중복 방지

### V1.15.10
- **패시브 성장 null 체크 추가**
  - 캐릭터 레벨 5 미만일 때 `passiveGrowth` null 참조로 인한 크래시 방지
  - skillSystem.ts의 모든 패시브 관련 코드에 안전한 접근 추가
- **멀티플레이어 스킬 실행 버그 수정**
  - 다른 플레이어의 W 스킬 실행 시 적 기지 데미지 미적용 문제 해결
  - 다른 플레이어의 E 스킬 실행 시 casterId 누락으로 인한 골드 분배 오류 수정

### V1.15.9
- **멀티플레이어 위치 동기화 개선**
  - 클라이언트 위치 예측과 호스트 위치 간 오차가 50px 초과 시 부드러운 lerp 보정 적용
  - 네트워크 지연으로 인한 캐릭터 위치 불일치 현상 완화
- **버프 지속시간 버그 수정**
  - 부활 후 무적 버프가 즉시 적용되지 않던 문제 해결
  - 새로 추가된 버프의 첫 프레임 지속시간 감소 건너뛰기
  - 오라 버프 공유 시에도 동일한 로직 적용

### V1.15.8
- **멀티플레이어 호스트 사망 시 게임 멈춤 버그 수정**
  - 호스트가 사망하면 적들이 공격을 멈추고 게임이 멈추던 문제 해결
  - 호스트 부활 대기 중에도 적 AI와 넥서스 데미지 로직 계속 실행
  - 싱글플레이어에서는 기존 동작 유지 (사망 시 게임 로직 일시 정지)
- **멀티플레이어 캐릭터 패시브 동기화 완전 수정**
  - **궁수**: 다중타겟 패시브 적용 (호스트와 동일하게 최대 3명 공격)
  - **기사**: HP 재생 패시브 적용 (호스트와 동일하게 초당 5+ HP 회복)
  - **마법사**: 데미지 보너스 패시브 적용 (호스트와 동일하게 25%+ 증가)
  - **기사**: Q 스킬 적중 시 W 스킬 쿨다운 1초 감소
- **적 기지 공격 시 마법사 데미지 보너스 패시브 적용**
  - 호스트 및 다른 플레이어 모두 기지 공격 시 데미지 보너스 적용

### V1.15.7
- **멀티플레이어 게임 종료 동기화 버그 수정**
  - 호스트가 게임 클리어 시 클라이언트들에게 "게임이 중단되었습니다"로 표시되던 문제 해결
  - 게임 종료 시 HOST_GAME_OVER 메시지를 클라이언트들에게 전송하도록 수정
  - 승리/패배 모든 상황에서 정상적인 게임 종료 화면 표시

### V1.15.6
- **클라이언트 버프 스킬 호스트 적용 버그 수정**
  - 비호스트 플레이어의 버프 스킬이 호스트에서 제대로 적용되지 않던 문제 해결
  - 멀티플레이어에서 버프 효과가 모든 플레이어에게 정상 동기화

### V1.15.5
- **게임 종료 시 경험치 저장 버그 수정**
  - 게임 종료 시 경험치가 저장되지 않던 문제 해결
  - 싱글/멀티플레이어 모두에서 경험치 정상 저장

### V1.15.4
- **오라 버프 시스템 개선**
  - 오라 버프 시스템 및 스킬 이펙트 동기화 개선
  - 멀티플레이어에서 오라 이펙트 정상 표시
- **광전사 버프 범위 시스템 개선**
  - 광전사 버프 범위 시스템 및 피해흡혈 적용 범위 개선
  - 버프 효과가 올바른 범위 내 아군에게 적용

### V1.15.3
- **멀티플레이어 캐릭터 정보 동기화 개선**
  - 캐릭터 레벨/SP 정보 전송 수정
  - 멀티플레이어 버프 동기화 및 공격 이펙트 통일
- **멀티플레이어 버그 수정**
  - 기본 공격 이펙트 및 버프 공유 버그 수정
  - 모든 플레이어에게 동일한 이펙트 표시

### V1.15.2
- **RPG 모드 UI 개선**
  - 네비게이션 개선 및 UI 업데이트
- **보스 밸런스 조정**
  - 멀티플레이 골드 분배 시스템 개선
  - 보스전 밸런스 최적화
- **버그 수정**
  - 플레이어 사망 시 적 넥서스 타겟팅 버그 수정
  - 보스 중복 스폰 버그 수정
  - SP 초기화 버그 수정

### V1.15.1
- **스킬 기지 데미지 기능 추가**
  - 모든 스킬(Q, W, E)이 적 기지에 데미지를 입힐 수 있도록 개선
  - 기본 공격뿐만 아니라 스킬(Shift), 궁극기(R)도 기지에 피해 가능
  - 범위 스킬로 기지 공략 전략 다양화
- **골드 획득량 대폭 상향**
  - 근접 적(melee): 5 → 12 (+140%)
  - 원거리 적(ranged): 8 → 18 (+125%)
  - 기사 적(knight): 15 → 35 (+133%)
  - 마법사 적(mage): 45 (신규)
  - 보스: 200 → 500 (+150%)
- **보스 스폰 버그 수정**
  - 보스 페이즈 진입 시 즉시 승리 처리되던 문제 해결
  - 보스 스폰 프레임에서 승리 체크 스킵하도록 수정
- **게임 재입장 시 데이터 잔존 버그 수정**
  - 비정상 종료 후 재입장 시 이전 게임 데이터가 남아있던 문제 해결
  - initGame에서 모든 게임 상태 명시적 초기화 추가

### V1.15.0
- **인게임 업그레이드 시스템 확장**
  - 공격속도(공속) 업그레이드 추가 (키보드 단축키: 4)
  - 사거리 업그레이드 추가 (궁수/마법사 전용, 키보드 단축키: 6)
  - 골드획득률 업그레이드 단축키 변경 (4 → 5)
  - 사거리 업그레이드는 최대 10레벨 제한 (레벨당 +8 사거리)
- **인게임 업그레이드 레벨 제한 해제**
  - 기존: 캐릭터 레벨에 따른 업그레이드 최대 레벨 제한
  - 변경: 골드만 있으면 무제한 업그레이드 가능 (사거리 제외)
  - 업그레이드 비용은 레벨에 따라 점진적으로 증가
- **SP 스탯 업그레이드 확장**
  - 공격속도(공속) SP 업그레이드 추가 (레벨당 -0.05초)
  - 모든 캐릭터에서 공격속도 SP 업그레이드 가능
- **멀티플레이어 부활 시스템 완성**
  - 비호스트 플레이어의 부활이 정상 동작하도록 수정
  - 사망 시간(deathTime) 동기화 추가
  - 호스트에서 다른 플레이어 부활 처리 로직 추가
- **멀티플레이어 업그레이드 동기화 개선**
  - 공격속도/사거리 업그레이드가 비호스트에서 적용되지 않던 문제 수정
  - 서버로부터 받은 config(attackSpeed, range) 동기화 추가
  - 새 업그레이드 타입(attackSpeed, range)에 대한 네트워크 메시지 지원

### V1.14.3
- **SP 스탯 업그레이드 레벨 제한 제거**
  - 공격력, 이동속도, 체력, 사거리, 체력 재생 모든 스탯 무제한 업그레이드 가능
  - 플레이어 레벨을 올려야 SP를 획득할 수 있으므로 자연스러운 밸런스 유지
  - UI에서 최대 레벨 표시 제거 (현재 레벨만 표시)
- **RPG 멀티플레이어 캐릭터 정보 동기화**
  - SP 스탯 업그레이드(statUpgrades)가 멀티플레이어에서 적용되지 않던 문제 수정
  - 멀티플레이어 영웅 초기화 시 싱글플레이어와 동일하게 SP 보너스 적용
  - 공격력, 이동속도, 체력, 사거리 SP 보너스 완전 동기화
- **멀티플레이어 업그레이드 시스템 완성**
  - COOP_UPGRADE_HERO_STAT 메시지 핸들러 구현
  - 각 플레이어의 characterLevel을 개별 업그레이드 상한으로 적용
  - 플레이어별 레벨이 다르면 최대 업그레이드 레벨도 다르게 적용
- **멀티플레이어 HP 재생 버그 수정**
  - SP hpRegen 업그레이드 보너스가 멀티플레이어에서 적용되지 않던 문제 수정
  - 전사, 기사 직업에서 싱글플레이어와 동일하게 HP 재생 적용
- **멀티플레이어 경험치 서버 저장 버그 수정**
  - 협동 모드 게임 종료 시 경험치가 서버에 저장되지 않던 치명적 버그 수정
  - processGameResult 함수를 통해 싱글플레이어와 동일하게 DB 저장
- **경험치 중복 저장 버그 완전 수정**
  - classProgressList 변경 시 expSavedRef가 잘못 초기화되어 경험치가 중복 저장되던 문제 해결
  - 새 게임 시작 시에만 expSavedRef 초기화하도록 수정
- **게스트 계정 브라우저 멈춤 버그 수정**
  - 게스트 계정으로 싱글플레이 중 캐릭터 사망 시 발생하던 브라우저 멈춤 문제 해결
  - RPGModeScreen useEffect에서 게스트 체크 추가
  - useProfileStore handleGameEnd에서 게스트 체크 추가 (이중 방어)

### V1.14.2
- **경험치 중복 저장 버그 부분 수정 (V1.14.3에서 완전 수정)**
  - useEffect 의존성 배열 문제로 인한 중복 호출 부분 방지
- **싱글/멀티플레이 로직 동기화**
  - 맵 크기 통일 (3000×2000)
  - 넥서스 위치 통일 (중앙: 1500, 1000)
  - 적 기지 위치 통일 (좌: 150, 우: 2850)
  - goldRate 계산 방식 통일 (고정 +2 골드/레벨)
  - 스폰 시스템 통일 (양쪽 기지 동시 스폰)
  - 멀티플레이에서 캐릭터 레벨 전달 기능 추가
- **SP 저장 버그 수정**
  - 캐릭터 레벨업 시 SP가 저장되지 않던 문제 해결
  - 서버 API에서 sp, statUpgrades 필드 저장/조회 누락 수정
- **맵 렌더링 버그 수정**
  - 캐릭터 이동 시 넥서스/적 기지가 함께 움직이던 문제 해결
  - 넥서스/기지 카메라 좌표 변환을 다른 엔티티와 동일하게 수정

### V1.14.1
- **SP 초기화 기능 추가**
  - 프로필에서 캐릭터 스탯 초기화 버튼 추가
  - 사용한 SP 전액 환불
  - 초기화 확인 다이얼로그로 실수 방지
- **프로필 화면 UI 개선**
  - 캐릭터 해금 조건 섹션 제거 (불필요한 중복 정보)
  - 클래스 진행 카드 높이 통일 (기사, 마법사 카드 잘림 현상 해결)
  - 화면 스크롤 가능하도록 개선
- **버그 수정**
  - 해금된 캐릭터 카드 클릭 시 모달이 표시되지 않던 문제 수정
  - statUpgrades null 안전성 강화 (기존 데이터 호환성 개선)

### V1.14.0
- **RPG 모드 넥서스 디펜스로 전환**
  - 기존 웨이브 서바이벌 → 넥서스 디펜스 게임 방식으로 변경
  - 중앙 넥서스 수호, 좌우 적 기지 파괴, 보스 2마리 처치로 승리
  - 적이 넥서스를 향해 이동하며 공격
- **골드 기반 업그레이드 시스템**
  - 인게임 레벨업 제거, 골드로 스탯 업그레이드
  - 1: 공격력, 2: 이동속도, 3: HP, 4: 골드획득률
  - 최대 업그레이드 레벨 = 캐릭터(직업) 레벨
- **적 AI 어그로 시스템**
  - 기본: 넥서스를 향해 이동 및 공격
  - 영웅에게 공격받으면 5초간 해당 영웅 추적
- **UI 개선**
  - 인게임 골드 표시 추가
  - 업그레이드 버튼 2x2 컴팩트 그리드로 변경
- **멀티플레이 통합**
  - 싱글/멀티 동일한 넥서스 디펜스 방식 적용
  - 멀티에서 영웅 사망 시 부활 시스템 유지
- **패시브 시스템 변경**
  - 웨이브 기반 → 캐릭터 레벨 기반으로 변경
  - 캐릭터 레벨 5 이상 시 패시브 활성화

### V1.13.3
- **인증 아키텍처 개선**
  - 프론트엔드 → 백엔드 API → Supabase 흐름으로 변경
  - 프론트엔드에서 Supabase 직접 호출 완전 제거
  - 서버에 Express REST API 추가 (인증/프로필 엔드포인트)
  - Supabase Admin API를 통한 서버 측 인증 처리
- **프론트엔드 Supabase 의존성 제거**
  - `@supabase/supabase-js` 패키지 제거 (프론트엔드)
  - `src/services/supabase.ts` 파일 삭제
  - `authService.ts`, `profileService.ts` API 호출 방식으로 변경
- **RPG 협동 모드 경험치 저장 버그 수정**
  - 멀티플레이어 게임 종료 시 경험치가 저장되지 않던 문제 해결
  - `RPGCoopGameScreen`에서 `handleGameEnd` 호출 추가
- **사운드 설정 저장 버그 수정**
  - 로그아웃 후 다른 계정 로그인 시 이전 계정의 설정이 적용되던 문제 해결
  - 로그인 사용자: DB에만 저장 (localStorage 사용 안 함)
  - 게스트: localStorage에만 저장
  - 로그아웃 시 localStorage 사운드 설정 삭제 (계정 간 혼동 방지)
- **회원탈퇴 기능 수정**
  - 회원탈퇴 시 Supabase Auth 계정도 완전 삭제
  - 기존 문제: 프로필만 삭제되고 Auth 계정 잔류
  - Admin API의 `deleteUser`로 완전 삭제 구현
- **세션 관리 개선**
  - localStorage 기반 세션 관리로 변경
  - 로그인 시 세션 저장, 로그아웃/탈퇴 시 세션 삭제
  - 앱 시작 시 저장된 세션 복원 및 유효성 검증
- **서버 패키지 추가**
  - express, cors, dotenv, @supabase/supabase-js 의존성 추가
  - 환경변수: `SUPABASE_URL`, `SUPABASE_ANON_KEY`, `SUPABASE_SERVICE_ROLE_KEY`
- **프론트엔드 환경변수 추가**
  - `VITE_API_URL`: 백엔드 API 서버 주소
- **RPG 모드 게임 중단 기능 추가**
  - 일시정지 메뉴에 "게임 중단" 버튼 추가
  - 게임 중단 시 현재까지의 진행 상황으로 게임 오버 처리
  - 패배로 기록되어 경험치 저장 후 종료
- **RPG 경험치 밸런스 조정**
  - 플레이어 경험치 2배 증가: 싱글(웨이브×10 + 승리 50), 협동(웨이브×15 + 승리 75)
  - 직업 경험치 2배 증가: 웨이브×5 + 킬×2
  - 캐릭터 해금 레벨 유지: 전사(15), 기사(40), 마법사(70)

### V1.13.2
- **로그인 시스템 변경**
  - 이메일 방식에서 아이디/비밀번호 방식으로 변경
  - 아이디: 4~20자, 영문/숫자/밑줄만 허용
  - 이메일 인증 없이 즉시 회원가입 완료
- **홈 화면 설정 버튼 추가**
  - 우측 상단에 설정(⚙️) 버튼 추가
  - 클릭 시 음량 조절 및 음소거 설정 가능
- **사운드 설정 계정별 저장**
  - 로그인 사용자: DB에 설정 저장, 다음 로그인 시 복원
  - 게스트 사용자: localStorage에 저장, 로그아웃 시 초기화
  - 비로그인 상태에서도 localStorage로 설정 유지
- **패시브 성장 알림 제거**
  - 웨이브 10/20/30... 클리어 시 패시브 활성화/강화 알림 제거
  - 패시브 성장 로직은 유지 (레벨 5 이상에서 활성화)
- **Supabase 마이그레이션 추가**
  - `player_profiles` 테이블에 `sound_volume`, `sound_muted` 컬럼 추가

### V1.13.1
- **RPG 모드 멀티플레이어 밸런싱**
  - 플레이어 수에 따른 적 공격력 스케일링 (2인: 1.1배, 3인: 1.2배, 4인: 1.3배)
  - 플레이어 수에 따른 적 수량 스케일링 (2인: 1.3배, 3인: 1.6배, 4인: 2배)
  - 보스는 수량 스케일링 제외 (항상 1마리)
- **게임 오버 UI 개선**
  - 게임 종료 시 계정 경험치 획득량 즉시 표시
  - 플레이어 EXP 및 클래스 EXP 각각 표시
  - 게스트 계정에는 비표시
- **경험치 획득량 50% 감소**
  - 싱글플레이: 웨이브당 10 → 5 EXP, 승리 보너스 50 → 25 EXP
  - 협동플레이: 웨이브당 15 → 8 EXP, 승리 보너스 75 → 40 EXP
  - 클래스 EXP: 웨이브당 5 → 3 EXP, 킬당 2 → 1 EXP
- **멀티플레이어 직업 해금 확인**
  - 협동 모드 로비에서도 직업 해금 레벨 확인
  - 잠긴 직업은 선택 불가 + 자물쇠 아이콘 표시
  - 잠긴 직업 선택 시 기본 직업(궁수)으로 자동 변경
- **로그아웃 시 데이터 초기화**
  - 로그아웃 시 ProfileStore(classProgress, gameHistory 등) 초기화
  - 다른 계정 데이터와 혼동 방지
- **협동 모드 직업 순서 변경**
  - 궁수 → 전사 → 기사 → 마법사 순서로 표시
- **프로필 화면 뒤로가기 개선**
  - 이전에 보던 화면으로 돌아가기 (기존: 항상 메인 메뉴로 이동)
- **RPG 싱글플레이 사망 화면 수정**
  - RTS 패배 화면 대신 RPG 전용 게임오버 모달 표시
- **사운드 시스템 개선**
  - 메인 화면부터 모든 화면에서 클릭 사운드 정상 재생
  - 웨이브 경고음(위잉위잉)은 보스 웨이브(10, 20, 30...)에서만 재생
- **ESC 일시정지 메뉴 설정 기능 추가**
  - 설정 버튼 클릭 시 볼륨 조절 슬라이더 표시
  - 음소거 토글 버튼 추가
- **UI 버그 수정**
  - 웨이브/레벨업 알림이 화면 중앙에서 왼쪽으로 치우쳐 보이던 문제 수정
  - 알림 애니메이션이 나타났다 바로 사라지던 문제 수정

### V1.13.0
- **RPG 모드 Supabase 계정 시스템**
  - 회원가입/로그인 기능 추가
  - 게스트 로그인 지원
  - 플레이어 프로필 및 레벨 시스템
  - 직업별 경험치 및 해금 시스템
- **로그인 UI 개선**
  - 에러 메시지 상단 여백 추가
  - UI 레이아웃 최적화

### V1.12.2
- **RPG 모드 멀티플레이어 이동 동기화 개선**
  - 목표 위치 기반에서 방향 기반 동기화로 변경
  - 클라이언트-서버 간 이동 끊김 현상 개선
  - 키 입력 시 즉시 방향 전송 (50ms 폴링 제거)
- **RPG 멀티플레이어 적 AI 타겟팅 개선**
  - 적이 항상 영웅을 추적하도록 변경 (싱글플레이와 동일)
  - 가장 가까운 영웅 우선 타겟팅 (거리 기반)
  - 비슷한 거리(150픽셀 이내)일 때만 근접 영웅 우선
  - 공격받을 시 공격자에게 반격 (가까울 때만)
- **RPG 모드 패시브 시스템 개편 (싱글/멀티 공통)**
  - 패시브 활성화 조건: 게임 시작 → 캐릭터 레벨 5 도달 시
  - **전사**: 피해흡혈 15% (레벨 5 이상)
  - **궁수**: 다중타겟 20% 확률 (레벨 5 이상)
  - **기사**: HP 재생 5/초 (레벨 5 이상)
  - **마법사**: 데미지 보너스 25% (레벨 5 이상)
- **RPG 모드 플레이 시간 표시 추가 (싱글/멀티 공통)**
  - 상단 중앙에 경과 시간 표시 (MM:SS 형식)
- **RPG 멀티플레이어 사망 시 관전 모드 추가**
  - WASD 키로 맵을 둘러볼 수 있음
  - 부활 타이머에 관전 모드 안내 표시
- **버그 수정**
  - 멀티플레이어 기사 HP 재생이 적용되지 않던 문제 수정
  - 멀티플레이어 적이 가까운 영웅을 무시하고 먼 근접 영웅만 타겟하던 문제 수정

### V1.12.1
- **RPG 모드 조작 시스템 개편 (싱글/멀티 공통)**
  - WASD 키로 이동 (우클릭 이동 제거)
  - 자동 공격 시스템: 사거리 내 적이 있으면 자동으로 기본 공격
  - 스킬 키 변경: Shift(스킬), R(궁극기)
  - 마우스는 스킬 방향 지정용으로만 사용
- **스킬바 UI 개편 (싱글/멀티 공통)**
  - Q 스킬 슬롯 제거 (자동 공격으로 대체)
  - Shift(스킬), R(궁극기) 2개 슬롯만 표시
  - 각 슬롯에 "스킬", "궁극기" 라벨 표시

### V1.12.0
- **RPG 모드 멀티플레이어 협동 모드 추가**
  - 2-4명 플레이어가 함께 웨이브를 클리어하는 협동 모드
  - 방 생성/참가 시스템 (6자리 초대 코드)
  - 서버 권위적 모델로 게임 상태 동기화
  - 경험치 공유 시스템 (모든 플레이어 동일 경험치 획득)
  - 플레이어 수에 따른 난이도 스케일링 (2인: 1.5배, 3인: 2배, 4인: 2.5배)
  - 자동 부활 시스템 (10~30초 대기 후 자동 부활)
  - 적 AI 어그로 시스템 (가까운 영웅 + 근접 직업 우선)
- **RPG 모드 버그 수정 및 개선**
  - 전사 광전사 버프 공격속도 30% 증가 효과 적용 (Q스킬 쿨다운 감소)
  - 멀티플레이 이동속도 버그 수정 (이동속도가 아닌 공격속도에 버프 적용)
  - 렌더링 일관성 개선 (광전사 불꽃 이펙트, 무적 이펙트, 스턴 이펙트)

### V1.11.7
- **RPG 모드 기사 직업 개선**
  - 기사 레벨업 시 HP +50 (다른 직업: +30)
  - 방패 돌진(W) 데미지 추가: 최대 HP의 10% 데미지 + 기절
  - Q 스킬 적중 시 W 스킬 쿨타임 1초 감소 (적 1명당)
  - Q/W 스킬 아이콘 교체 (Q: 💪, W: 🛡️)
- **RPG 모드 게임 템포 개선**
  - 영웅 및 적 이동속도 50% 증가
  - 웨이브 간 대기 시간 제거 (즉시 다음 웨이브 시작)
- **RPG 모드 사운드 개선**
  - 레벨업 사운드 변경: 단순 상승음 → 3음 아르페지오
  - 레벨업/웨이브 사운드 중복 재생 방지 (800ms 지연)

### V1.11.6
- **RPG 모드 레벨업 시 스킬 쿨타임 초기화**
  - 레벨업하면 모든 스킬(Q/W/E)의 쿨타임이 즉시 초기화됨
  - 위기 상황에서 레벨업을 통해 전투 지속 가능
- **RPG 모드 기본 공격 이펙트 개선**
  - 사거리 내 적 유무와 관계없이 공격 이펙트가 항상 표시됨
  - 궁수/마법사: 적이 없어도 마우스 방향으로 투사체 발사
  - 전사/기사: 적이 없어도 베기/타격 모션 표시
- **스킬 해금 시스템 제거**
  - 모든 스킬(Q/W/E)이 게임 시작부터 사용 가능
  - 레벨업 시 스킬 해금 알림 제거

### V1.11.5
- **RPG 모드 패시브 성장 시스템 추가**
  - 웨이브 10 클리어부터 활성화, 10웨이브마다 성장
  - **전사**: 피해흡혈 (최대 50%, 초과 시 공격력 +0.5%/10W)
  - **궁수**: 다중타겟 확률 (최대 100%, 초과 시 공격력 +0.5%/10W)
  - **기사**: HP 재생 (최대 200/초, 초과 시 체력 +0.5%/10W)
  - **마법사**: 데미지 보너스 (최대 100%, 초과 시 공격력 +1%/10W)
  - 전사 피해흡혈: 패시브 + 궁극기 버프 곱연산 적용
  - 패시브 활성화/강화 시 알림 표시
- **RPG 모드 기본 공격 이펙트 추가**
  - **전사**: 주황색 베기 호 + 피격 스파크
  - **궁수**: 녹색 화살 발사 애니메이션 (다중타겟 시 여러 화살)
  - **기사**: 파란색 방패 타격 호 + 충격파
  - **마법사**: 보라색 마법 볼트 발사 + 폭발 이펙트
  - 각 피격 대상에 개별 히트 이펙트 표시

### V1.11.4
- **RPG 모드 스킬 이펙트 및 모션 추가**
  - **전사 돌진(W) 스킬 개선**
    - 순간이동 대신 실제 이동 모션 추가 (0.25초 지속)
    - 속도선, 그라데이션 잔상, 잔영 효과
    - 도착 시 충격파 이펙트
    - 돌진 후 무적 상태 황금 방패 효과
  - **전사 광전사(E) 스킬 개선**
    - 기존 붉은 원 대신 불타는 화염 효과
    - 16개 화염이 캐릭터 주변에서 솟아오름
    - 불꽃 스파크 파티클 효과
    - 발동 시 다중 충격파 폭발 이펙트
  - **궁수 관통화살(W) 스킬 효과 추가**
    - 화살 모양 (화살대, 촉, 깃털) 캔버스 렌더링
    - 화살 궤적 잔상 및 에너지 파동 효과
    - 최대 사거리 도달 시 자동 소멸
    - 관통 경로 잔류 이펙트
  - **궁수 화살비(E) 스킬 효과 추가**
    - 20발 화살이 하늘에서 낙하
    - 5개 그룹으로 시간차 낙하 (중력 가속)
    - 착지 시 충격파 및 먼지 효과
    - 착지 후 바닥에 꽂힌 화살 표시
    - 시작 시 경고 원 표시
- **버그 수정**
  - 전사 돌진 후 캐릭터가 이동할 수 없던 문제 수정
  - 궁수 스킬 애니메이션이 표시되지 않던 문제 수정 (스킬 타입 매칭)

### V1.11.3
- **RPG 모드 Q 스킬(기본 공격) 시스템 개선**
  - 직업별 기본 사거리 적용 (전사 80, 궁수 150, 기사 60, 마법사 120)
  - 바라보는 방향으로만 공격 적용 (후방의 적은 공격되지 않음)
  - 직업별 공격 타입 차별화
    - 전사, 기사: 근접 범위 공격 (다수 타격, 전방 110도)
    - 마법사: 원거리 범위 공격 (다수 타격, 전방 90도)
    - 궁수: 원거리 단일 공격 (전방 90도)
- **기본 공격 사거리 표시 기능 추가**
  - C 키를 누르고 있으면 캐릭터의 기본 공격 사거리가 노란색 원으로 표시
- **조작법 안내 업데이트**
  - 하단 안내 텍스트 수정: `WASD: 이동 | 자동 공격 | Shift: 스킬 | R: 궁극기 | C: 사거리 | Space: 카메라`
- **버그 수정**
  - 전사/기사의 W 스킬(돌진)이 데미지만 입히고 이동하지 않던 문제 수정

### V1.11.2
- **RPG 모드 전투 시스템 개선**
  - Q 키로 기본 공격 (마우스 방향으로 공격)
  - 좌클릭 자동 공격 제거
  - 공격 적중 판정 개선
- **적 AI 개선**
  - 적이 항상 플레이어를 추적하도록 변경
- **버그 수정**
  - 스킬 데미지가 적용되지 않던 문제 수정
  - 직업 선택이 적용되지 않던 문제 수정

### V1.11.1
- **RPG 모드 개선**
  - 이동 방향에 따른 유닛 이미지 반전 기능 추가
  - 영웅이 오른쪽으로 이동하면 오른쪽을 바라보고, 왼쪽으로 이동하면 왼쪽을 바라봄
  - 적 유닛이 영웅 방향을 바라보도록 수정
- **버그 수정**
  - SkillType 타입 정의 누락 수정
  - 미사용 변수 경고 수정

### V1.11.0
- **RPG 모드 추가**
  - 4가지 직업 시스템 (전사, 궁수, 기사, 마법사)
  - 직업별 고유 스탯 및 스킬 (Q/W/E)
  - 웨이브 기반 서바이벌 모드
  - 적 AI 시스템 (탐지, 추적, 공격)
  - 미니맵 안개 시야 시스템
  - 버프 시스템 (광전사, 철벽 방어)
  - 레벨업 및 경험치 시스템
  - 자세한 내용은 [RPG 모드 설명서](docs/rpg-mode.md) 참조

### V1.10.1
- **사운드 재생 개선**
  - 플레이어 측 이벤트에서만 사운드 재생
  - 적 유닛의 공격, 채집, 힐 소리가 더 이상 재생되지 않음
  - AI 대전 및 멀티플레이어 모든 모드에서 적용
- **버그 수정**
  - 볼륨 슬라이더 호버 시 마우스 이동 중 패널이 사라지는 문제 수정
  - 튜토리얼 건너뛰기 후 적 본진 파괴 시 게임이 종료되지 않던 문제 수정

### V1.10.0
- **사운드 시스템 추가**
  - Web Audio API 기반 프로시저럴 사운드 시스템
  - 외부 파일 없이 코드로 사운드 생성 (저작권 문제 없음)
  - UI 클릭, 유닛 생산, 전투, 자원 수집, 승리/패배 등 14종 사운드
  - `M` 키 또는 미니맵 좌측 스피커 아이콘으로 음소거 토글
  - 볼륨 슬라이더로 소리 크기 조절 가능
  - 튜토리얼/AI 대전/멀티플레이어 모든 모드 지원

### V1.9.5
- **튜토리얼 버그 수정**
  - 이전 게임의 알림이 새 게임에서 표시되는 문제 수정
  - 튜토리얼 조기 종료 버그 수정 (마지막 단계까지 완료해야 게임 종료)
  - 키보드 단축키(E)로 약초 판매 시 튜토리얼 진행되지 않던 문제 해결

### V1.9.4
- **튜토리얼 모드 추가**
  - 19단계 단계별 학습 시스템
  - 모든 유닛과 액션을 체험할 수 있는 가이드
  - 넉넉한 초기 자원 (골드 500, 나무 50, 돌 30, 약초 30, 수정 10)
  - 30분 게임 시간, 적 기지 HP 300
  - ESC 키로 일시정지 지원
  - 튜토리얼 UI 위치 조정 (자원바와 겹치지 않도록)
- **가장자리 스크롤 기능 추가**
  - 마우스를 화면 가장자리로 이동하면 카메라 자동 이동
  - 기본값: 비활성화
  - `Y` 키 또는 미니맵 좌측 📷 버튼으로 토글
  - 멀티플레이어 모드에서도 동작

### V1.9.3
- **유닛 밸런스 조정**
  - 마법사 비용: 150골드 + 10수정 → 150골드 + 50나무 + 10수정
  - 힐러: 힐량 10 → 5HP/초, 힐 범위 100 → 130px
- **UI 개선**
  - 게임 종료 화면: 본진 HP 통계 제거
  - 로비 화면: 버튼 패딩 조정

### V1.9.2
- **카운트다운 화면 개선**
  - 싱글플레이어 카운트다운 중 인게임 화면이 배경에 표시
  - 맵, 자원 노드, UI 패널 등을 게임 시작 전 미리 확인 가능
  - 반투명 오버레이로 카운트다운 숫자 표시
- **메뉴 UI 개선**
  - 메인 메뉴: 버튼 크기 및 간격 조정
  - 모드 선택: 카드 내 아이콘과 텍스트 간격 조정
  - 난이도 선택: 설명 박스 패딩 및 내부 간격 조정
  - 일시정지 화면: 버튼 패딩 조정, 애니메이션 속도 향상 (300ms → 200ms)

### V1.9.1
- **키보드 단축키 시스템 추가**
  - `Q`: 벽 배치 모드 토글
  - `W`: 본진 강화
  - `E`: 약초 판매
  - WASD 카메라 이동 제거 (방향키만 사용)
- **액션 패널 UI 개선**
  - 레이블 한글화 ("ACTIONS" → "액션")
  - 단축키 배지 표시 (Q, W, E)
  - 비용 표시 이모지 아이콘으로 변경
- **유닛 패널 UI 개선**
  - 공격 유닛과 지원 유닛 구분 표시
  - "공격 유닛" / "지원 유닛" 라벨 추가
- **게임 시작 카운트다운 추가**
  - AI 모드 시작 시 3-2-1 카운트다운 표시
  - 카운트다운 완료 후 게임 시작
- **일시정지 화면 개선**
  - ESC 키로 게임 재개 가능
- **알림창 버그 수정**
  - 게임 시작 시 이전 알림이 표시되는 버그 수정
  - UI 상태 초기화 함수 추가 (resetGameUI)
- **멀티플레이어 호환성**
  - 모든 UI 개선 사항 멀티플레이어 모드에도 적용

### V1.9.0
- **극악 난이도 추가**
  - 2단계 페이즈 시스템 (본진 파괴 → 보스 출현)
  - 적 본진 HP 2000, AI 골드 6/초, 행동 확률 98%
  - 1분마다 대량 발생 (풀 조합)
  - 한 번에 최대 4유닛 동시 소환
- **보스 유닛 추가**
  - HP 2000, 공격력 100, AOE 반경 80px
  - 이동속도 0.5 (매우 느림)
  - 2.5배 크기 렌더링, 붉은 글로우 효과
  - 파괴된 적 본진 위치에서 출현
- **보스 테스트 난이도 추가**
  - 적 기지 HP 1 (즉시 파괴)
  - 보스 밸런스 테스트용

### V1.8.5
- 어려움 난이도 대량 발생 밸런스 조정
  - 첫 번째 대량 발생(1분30초): 마법사 제외 (검병+궁수+기사+힐러)
  - 두 번째 이후(3분, 4분30초...): 마법사 포함 풀 조합
- 유닛 밸런스 조정
  - 기사 HP: 250 → 300 (탱커 역할 강화)
  - 광부 채집속도: 1.0 → 1.5/초
  - 채집꾼 채집속도: 2.0 → 1.5/초 (지원 유닛 균형)
  - 마법사 이동속도: 1.2 → 1.7, 사거리: 180 → 200 (기동성 및 화력 강화)
- 서버-클라이언트 CONFIG 동기화
  - 멀티플레이어 서버 유닛/구조물 설정을 클라이언트와 완전히 동기화
  - 벽 건설 비용, 약초 판매, 기지 업그레이드 비용 등 일치

### V1.8.4
- 기지 업그레이드 비용 변경
  - 1레벨: 150골드만 필요 (나무/돌 불필요)
  - 2레벨 이상: 골드 + 나무 + 돌 필요 (기존 방식)
- 힐러 이펙트 투명도 개선
  - 힐 이펙트 불투명도 40%로 조정하여 유닛 HP바 가시성 향상
- 벽 설치 가능 영역 표시
  - 벽 설치 모드 진입 시 설치 가능 영역(내 진영)을 시각적으로 표시
  - 연한 초록색 오버레이 + 중앙선 점선 표시
- 어려움 난이도 대량 발생 시간 조정
  - 2분 → 1분 30초로 빨라짐 (더 공격적인 AI)

### V1.8.3
- AI 난이도 시스템 대폭 개선
  - **중간**: 기존 어려움 수준으로 상향 (행동 주기 2.5초, 행동 확률 85%)
  - **어려움**: 더 공격적으로 변경 (행동 주기 2초, 행동 확률 95%, 다중 소환)
- 대량 발생 시스템 추가
  - 중간: 2분에 검병+궁수+기사+힐러 무료 소환 (1회)
  - 어려움: 2분마다 검병+궁수+기사+마법사+힐러 무료 소환 (반복)
  - 대량 발생 경고 UI 표시 ("대량 발생!" 알림)
  - AI 자원과 무관한 무료 소환
- 힐러 이펙트 변경
  - 이모지(➕)에서 초록색 십자가 도형으로 변경
  - 새로운 'cross' 파티클 모양 추가
- 문서 업데이트 (도움말/README)
  - 채집꾼 비용: 35 → 65 골드
  - 벽 건설 비용: 20 나무 + 10 돌 → 35 나무 + 20 돌
  - 기지 업그레이드 비용: 100 골드 + 50 돌 → 100 골드 + 50 나무 + 50 돌

### V1.8.2
- 멀티플레이어 모드 이펙트 애니메이션 버그 수정
  - 게임 루프가 시작되지 않아 이펙트가 멈춰있던 문제 해결
  - `startGame()` 호출 추가로 이펙트가 AI 모드와 동일하게 부드럽게 동작

### V1.8.1
- 멀티플레이어 모드 이펙트 시스템 지원
  - 서버에서 `UNIT_HEALED`, `RESOURCE_GATHERED` 이벤트 브로드캐스트
  - 클라이언트에서 서버 이벤트 수신 시 이펙트 생성
  - 모든 이펙트(공격/채집/힐)가 싱글/멀티플레이어 동일하게 표시
- 이펙트 이벤트 쿨타임 적용
  - 채집 이펙트: 0.3초
  - 힐 이펙트: 0.5초

### V1.8.0
- 유닛 행동 파티클 이펙트 시스템 추가
  - 근접 공격: 빨간색 파티클 방사 (검병, 기사)
  - 원거리 공격: 노란색 파티클 (궁수)
  - 마법 공격: 보라색 AOE 원형 파동 + 별 파티클 (마법사)
  - 나무 채집: 갈색 나무 조각 튀김 (나무꾼)
  - 돌 채집: 회색 돌 파편 튀김 (광부)
  - 약초 채집: 초록색 입자 상승 (채집꾼)
  - 금 채집: 금빛 별 파티클 (금광부)
  - 힐: 초록색 ➕ 이모지 상승 (힐러)
- 이펙트 성능 최적화
  - 최대 200개 이펙트, 이펙트당 30개 파티클 제한
  - 채집 이펙트 0.3초 쿨타임
  - 화면 밖 파티클 렌더링 스킵
- 유닛 크기 증가
  - 이미지 크기: 28x34 → 30x40 (세로 18% 증가)
  - 베이스 원 크기: 15 → 17 (반경)
  - 체력바 너비: 24 → 26

### V1.7.9
- 커스텀 유닛 이미지 시스템 추가
  - PNG 이미지로 유닛 표시 (이모지 대체)
  - 이미지 로드 실패 시 이모지 폴백
  - 앱 시작 시 이미지 프리로드
- 유닛 이미지 방향 자동 반전
  - 플레이어 유닛: 오른쪽(적 방향) 바라봄
  - 적/AI 유닛: 왼쪽(플레이어 방향) 바라봄
- 유닛 이미지 크기 조정 (28x34)

### V1.7.8
- 유닛별 공격속도(attackSpeed) 설정 추가
  - 검병: 1초, 궁수: 2초, 기사: 1초, 마법사: 2.5초, 힐러: 1초
- 싱글/멀티플레이어 전투 로직 일관성 확보
- 액션 패널 호버 툴팁 이모지 호환성 수정
  - 커스텀 툴팁으로 Twemoji 적용

### V1.7.7
- Twemoji 적용으로 크로스 플랫폼 이모지 호환성 확보
  - 모든 OS/브라우저에서 동일한 이모지 표시
  - UI 컴포넌트 (유닛 버튼, 자원 바, 도움말 등)
  - Canvas 렌더링 (유닛, 자원 노드, 본진)
  - 앱 시작 시 이모지 이미지 프리로드

### V1.7.6
- 힐러 로직 개선
  - 광역 회복으로 변경 (범위 내 모든 전투 유닛 회복)
  - 전투 유닛만 회복 및 따라다님 (지원 유닛 제외)
  - 아군 전투 유닛 전멸 시 적 전투 유닛 공격
- 유닛 소환 쿨타임 추가
  - 검병: 1.5초, 궁수: 3초, 기사: 5초, 마법사: 5초
  - 지원 유닛: 1초 (금광부: 2초, 힐러: 5초)
  - UI에서 쿨타임 시각적 표시
- 싱글/멀티플레이어 전투 로직 일관성 확보
  - 서버 힐러 유닛 타입 참조 버그 수정

### V1.7.5
- 미니맵 줌 비율 반영
  - 맵 축소/확대에 따라 미니맵 뷰포트 크기 동기화
  - 미니맵 클릭 시 줌 비율 고려하여 카메라 이동
- 멀티플레이어 본진 강화 레벨 표시 버그 수정
  - 서버 상태에서 업그레이드 레벨 동기화
  - UI에서 실시간 레벨 표시
- 반격 로직 개선
  - 사거리 내 공격자만 반격 (멀리서 공격받아도 가까운 적 우선)
  - 검병, 궁수, 기사, 마법사, 힐러 모두 적용

### V1.7.4
- 벽 시스템 개선
  - 벽 설치 후 30초 경과 시 자동 소멸
  - 경로상 벽만 타겟팅 (본진 방향에 있는 벽만 공격)
- 반격 시스템 추가
  - 공격받은 유닛은 공격자를 우선 타겟팅
  - 사거리 내면 즉시 반격, 사거리 밖이면 접근 후 반격
- 서버 멀티플레이어 로직 동기화

### V1.7.3
- 전투 유닛 타겟팅 버그 수정
  - 근접 유닛이 본진 근처의 적 유닛을 지나치는 문제 해결
  - 적 유닛이 벽/본진보다 가까우면 먼저 접근하도록 개선
- 도움말 UI 업데이트
  - 마법사, 힐러 유닛 정보 추가
  - 기지 업그레이드 설명 보완

### V1.7.2
- 유닛 밸런스 조정
  - 기사 공격력: 30 → 10 (탱커 역할 강화)
  - 마법사 공격력: 35 → 50 (딜러 역할 강화)

### V1.7.1
- 기지 업그레이드 최대 레벨 5 제한
- 최대 레벨 도달 시 "강화 MAX" 표시
- 문서 업데이트 (GAMEPLAY.md, BALANCE.md)

### V1.7.0
- 새로운 유닛 추가
  - 힐러: 70골드 + 15약초, 아군 HP 회복 (10HP/초, 범위 100px)
  - 마법사: 150골드 + 10수정, 범위 공격 (AOE 50px)
- 자원 노드 증가
  - 약초: 15 → 20개
  - 나무: 16 → 20개
  - 돌: 10 → 14개
  - 금광산: 8 → 10개
- 전투 유닛 타겟팅 개선
  - 우선순위: 가까운 적 유닛 > 벽 > 본진
- 힐러 행동 우선순위
  - 아군 회복 > 반격 > 대기
- 서버 멀티플레이어 로직 동기화

### V1.6.1
- 벽 타겟팅 시스템 개선
  - 유닛이 벽을 본진보다 먼저 공격
  - 공격 중인 벽이 파괴될 때까지 타겟 유지
  - 공격 중 다른 유닛에게 공격받으면 반격 후 벽으로 복귀
- 기지 업그레이드 시스템 개선
  - 업그레이드 비용 레벨당 1.5배 증가
  - 업그레이드 시 골드 수입 +1/초 추가
  - UI에 현재 레벨 및 다음 업그레이드 비용 표시

### V1.6.0
- 마우스 스크롤 줌 기능 추가 (0.5x ~ 2x)
- 맵 크기 확장 (3000x2000 → 4000x2400)
- 자원 재생성 시간 조정
  - 약초: 45초 → 30초
  - 나무: 60초 → 40초
  - 금광산: 60초 → 40초
- 자원 노드 고갈 시 재생성 로직 구현

### V1.5.3
- 서버 상태 동기화 주기 최적화 (100ms → 50ms)
- 도움말 UI 가독성 대폭 개선
- 타이머 UI 고정 너비 적용 (크기 변동 방지)
- 타이머 프로그레스 바 제거
- 멀티플레이어 게임 종료 화면 간소화
  - HP 통계 숨김
  - 기지 파괴 메시지 제거

### V1.5.2
- 멀티플레이어 통신 지연 문제 해결
- 클라이언트 측 보간(interpolation) 시스템 추가
- 유닛 위치 부드러운 이동 처리
- 골드 수입 부드러운 증가 표시
- 타이머 부드러운 감소 처리
- 서버 상태 전송 주기 최적화 (500ms → 100ms)

### V1.5.1
- 멀티플레이어 실시간 상태 동기화 완료
- 초대 코드 기반 방 시스템 구현
- 진영 배정 시스템 (방장: 왼쪽, 참가자: 오른쪽)
- 멀티플레이어 전용 렌더링 시스템 추가
- 서버 상태 기반 UI 컴포넌트 연동

### V1.5.0
- 1vs1 네트워크 멀티플레이어 모드 기본 구조 추가
- WebSocket 기반 실시간 대전 서버 구현
- 서버 권위 모델로 게임 상태 동기화
- 모노레포 구조로 프로젝트 재구성 (client/server/shared)

### V1.4.0
- AI 난이도 시스템 추가 (쉬움/중간/어려움)
- 난이도별 적 기지 HP 차등 적용
- AI 채집꾼/광부 생산 기능 추가
- AI 약초 판매 기능 추가
- 게임 시간 단축 (20분 → 10분)
- 기사 스탯 조정 (HP 200→250, 공격력 25→30)

### V1.3.0
- 벽 배치 시스템 개선 (위치 선택 가능)
- 적 공격 유닛이 벽 공격 기능 추가
- AI 밸런스 조정 (골드 수급 3/초로 감소)
- 광부 이동 속도 증가 (1.0 → 1.2)

### V1.2.0
- 기사 유닛 추가 (120G + 20W + 30S, HP 200, 공격력 25)
- 광산 수 증가 (각 진영 4개, 총 8개)
- 광산 재생성 시간 단축 (120초 → 60초)
- 유닛 전투 시스템 개선 (채집 유닛 반격 기능)
- 공격 유닛이 모든 적 유닛 타겟팅

### V1.1.0
- 광산 자원 노드 추가 (각 진영 2개씩)
- 금광부 유닛 추가 (광산에서 골드 채집)
- AI 금광부 생산 로직 추가

### V1.0.0
- 기본 게임 시스템 구현
- 5종 유닛 (검병, 궁수, 나무꾼, 광부, 채집꾼)
- 5종 자원 (골드, 나무, 돌, 약초, 수정)
- 적 AI 시스템
- 벽 건설 및 기지 업그레이드
- 미니맵 및 카메라 시스템

---

## 알려진 문제

현재 알려진 문제 없음.

---

## 라이선스

MIT License
